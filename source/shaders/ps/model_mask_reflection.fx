#include "include/util/reflection.fx"

#include "include/model/model_shared_variables.fx"
#include "include/model/normals.fx"
#include "include/model/lighting.fx"
#include "include/model/specular_color.fx"

struct PS_INPUT{
 	float  		Fog				: FOG;
 	float3 		Position3D		: TEXCOORD0;
 	float4 		DiffuseMultiUV	: TEXCOORD1;
 	float4 		DetailUV 		: TEXCOORD2;
	float3x3	TBNTranspose 	: TEXCOORD3;
	float4		NormalDetailUV	: TEXCOORD6; 
};

///////////////////////////////////////////////////////////////////////////////
// Pixel Shader 2.0 shaders
///////////////////////////////////////////////////////////////////////////////
half4 ModelMaskReflection(PS_INPUT IN,
    uniform const int nDetailFunction,
    uniform const bool bDetailBeforeReflection,
    uniform const bool bPlanarAtmosphericFog,
    uniform const bool bInverse,
	uniform const bool bBaseNorm,
	uniform const bool bDetailNorm,
	uniform const bool bSpecMap,
	uniform const bool bSpecLighting) : COLOR
{
	half4 Diff = 0;
	half3 Reflect = 0;
	half4 Spec = 1;

	half4 T0 = tex2D( TexSampler0, IN.DiffuseMultiUV.xy );
	half4 T1 = tex2D( TexSampler1, IN.DetailUV.xy );
	half4 T2 = tex2D( TexSampler2, IN.DiffuseMultiUV.xy );
	half4 T4 = tex2D( TexSampler4, IN.DiffuseMultiUV.xy );
	half4 T5 = tex2D( TexSampler5, IN.NormalDetailUV.xy );
	half4 T6 = tex2D( TexSampler6, IN.NormalDetailUV.zw );
	
	// get the world space normals
	float3 Normals = GetNormals(bBaseNorm, bDetailNorm,	IN.TBNTranspose, T4, T5.xy, T6.xy);

	float3 EyeVector = c_eye_view_position.xyz - IN.Position3D;
	float3 EyeVectorNorm = normalize(EyeVector);

	float4 SpecularMap = 1;
	if(bSpecMap)
	{
		SpecularMap = tex2D(TexSampler7, IN.DiffuseMultiUV.xy);
		SpecularMap.xyz = saturate(pow(SpecularMap.xyz, c_specular_color_map_exponent) * c_specular_color_map_coefficient);	
		SpecularMap.w = lerp(1, SpecularMap.w, c_spec_color_exponent_mask_toggle);
	}	
	
	Spec = GetSpecularColor(Normals, EyeVectorNorm,	SpecularMap, c_object_perpendicular_colour, c_object_parallel_colour);
	
	// calculate the lighting contributions
	LightVectorSet LightVectors = GetLightVectors(IN.Position3D);
	float4 LightAttenuations = GetLightAttenuations(LightVectors, Normals, IN.DetailUV.w);

	float3 DiffuseLighting = GetDiffuseLighting(LightAttenuations);
	float3 SpecularLighting = 0;
	if(bSpecLighting)
	{
		SpecularLighting = GetSpecularLighting(Normals, EyeVectorNorm,
			LightVectors, LightAttenuations,
			Spec.rgb, SpecularMap.w, T2.b);
	}		
	Diff.rgb = DiffuseLighting;
	Diff.a = IN.DetailUV.z;
		
	// get the reflection vector
	Reflect = GetReflectionVector(EyeVector, Normals);
	
	half4 T3 = texCUBE( TexSampler3, Reflect );

	half4 R0;
	half4 R1;
	half4 D0 = Diff;
	half4 D1 = Spec;
	half3 SRCCOLOR;
	half SRCALPHA;

	// combiner 0

	// combiner 1
	D0.rgb	= D0 + (T2.g*c_self_illumination_color);

	// combiner 2
	R1.a	= T2.b*D1.a;
	//Something wrong with R0
	R0		= (T2.a*c_primary_change_color) + (1-T2.a);

	// combiner 3
	if(detail_function_multiply==nDetailFunction)
	{
		T1.rgb = bInverse ? lerp( T1, 1.0, T2.b ) : lerp( 1.0, T1, T2.b );
	}
	else
	{
		T1.rgb = bInverse ? lerp( T1, 0.5, T2.b ) : lerp( 0.5, T1, T2.b );
	}
	
	// combiner 4
	T3.rgb	= T3*D1;
	D0.rgb	= D0*R0;


	if(bDetailBeforeReflection)
	{
		// combiner 6
		R0.rgb = (T0*D0) + (T3*R1.a);
		
		// combiner 7
		if(detail_function_biased_multiply==nDetailFunction)
		{
			R0.rgb	= (R0*T1)*2;
		}
		else if(detail_function_multiply==nDetailFunction)
		{
			R0.rgb	= R0*T1;
		}
		else if(detail_function_biased_add==nDetailFunction)
		{
			R0.rgb	= R0+((2*T1)-1);
		}
	}
	else
	{
		// combiner 6
		if(detail_function_biased_multiply==nDetailFunction)
		{
			T0.rgb	= (T0*T1)*2;
		}
		else if(detail_function_multiply==nDetailFunction)
		{
			T0.rgb	= T0*T1;
		}
		else if(detail_function_biased_add==nDetailFunction)
		{
			T0.rgb	= T0+((2*T1)-1);
		}
		
		// combiner 7             s
		R0.rgb = (T0*D0) + (T3*R1.a);
	}
	
	R0.rgb += SpecularLighting;

	if(bPlanarAtmosphericFog)
	{
		// combiner 5
		R1.rgb	= saturate(c_fog_color_correction_1 - (D0.a * c_fog_color_correction_E));
		
		// final combiner
		SRCCOLOR = lerp((R0*c_fog_color_correction_0.a), c_fog_color_correction_0, D0.a) + R1;
	}
	else
	{
		// final combiner
		SRCCOLOR = R0;
	}
	
	SRCALPHA = T0.a * c_primary_change_color.a;

	return half4( SRCCOLOR, SRCALPHA );
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    add r1.xyw, r2.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.z
    mul_pp r0.xyz, r0, r1
    add_pp r3.xyz, r0, r0
    mov_pp oC0, r3

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    add r1.xyw, r2.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.x
    mul_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    add r1.xyw, r2.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.x
    mul_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    add r1.xyw, r2.xyzz, c2.y
    mad_pp r1.xyw, r1.z, r1, c2.z
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    nrm r5.xyz, r2
    dp3 r0.w, t3, r5
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mad_pp r4.xyz, r1.xyww, r0.w, r0
    mov_pp oC0, r4

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.y
    mad_pp r3.xyz, r1.z, r3, c2.x
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.y
    mad_pp r3.xyz, r1.z, r3, c2.z
    mad_pp r2.xyz, r3, c2.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c2.y, r2
    mul_pp r0.xyz, r0, r4
    add_pp r3.xyz, r0, r0
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c2.x, r2
    mul_pp r3.xyz, r0, r4
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c2.x, r2
    mul_pp r3.xyz, r0, r4
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    lrp_pp r3.xyz, r1.z, c2.y, r2
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r1.xyww, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r1.xyww
    texld_pp r4, t1, s0
    texld_pp r2, r2, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r3
    add_pp r0.xyz, r0, r0
    nrm r3.xyz, r1.xyww
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    mad_pp r4.xyz, r1.xyww, r0.w, r0
    mov_pp oC0, r4

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c2.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c2.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c5
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.x, r0.x, r1.w
    mul r0.x, r0.y, r0.x
    mov r1.w, c15.w
    add r1.xyz, -t0, c15
    dp4 r1.w, r1, r1
    nrm r3.xyz, r1
    mad r3.w, r1.w, -c15.w, r2.x
    dp3_sat r0.z, t3, r3
    dp3 r0.w, r3, -c16
    mov r1.w, c16.w
    mad_sat r0.w, r0.w, r1.w, c17.w
    mul r0.z, r0.z, r3.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r3.xyzz, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r0, r1.xyww
    mul_pp r4.w, r4.w, c0.w
    add r1.xyw, r3.xyzz, c5.y
    mad_pp r1.xyz, r1.z, r1.xyww, c5.z
    mul_pp r0.xyz, r0, r1
    mul_pp r0.xyz, r0, c1.w
    add r1.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    add r1.xyw, r2.xyzz, c5.y
    mad_pp r1.xyz, r1.z, r1.xyww, c5.x
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    add r1.xyw, r2.xyzz, c5.y
    mad_pp r1.xyz, r1.z, r1.xyww, c5.x
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    add r1.xyw, r2.xyzz, c5.y
    mad_pp r1.xyw, r1.z, r1, c5.z
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    nrm r5.xyz, r2
    dp3 r0.w, t3, r5
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mad_pp r0.xyz, r1.xyww, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c5.y
    mad_pp r3.xyz, r1.z, r3, c5.x
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c5.y
    mad_pp r3.xyz, r1.z, r3, c5.x
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 2, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.x
    dp3_sat r0.y, t3, r1
    dp3 r0.w, r1, -c13
    mov r2.w, c13.w
    mad_sat r0.w, r0.w, r2.w, c14.w
    mul r0.y, r0.y, r1.w
    mul r1.x, r0.w, r0.y
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r0.x
    dp3_sat r0.x, t3, r3
    dp3 r0.y, r3, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r0.x, r0.x, r3.w
    mul r1.y, r0.y, r0.x
    max r0.xy, r1, t2.z
    min r1.xy, t2.w, r0
    mov r2.xyz, c14
    mad_pp r0.xyw, r1.x, r2.xyzz, c22.xyzz
    mad_pp r0.xyw, r1.y, c17.xyzz, r0
    dp3 r1.x, -c18, t3
    mul r1.y, r1.x, c9.z
    max r2.x, r1.x, r1.y
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyw, r2.x, c19.xyzz, r0
    mad_pp r0.xyw, r2.y, c21.xyzz, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyw, r1.y, c4.xyzz, r0
    add_pp r2.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.xyw, r0, r1
    nrm r4.xyz, r2
    dp3 r3.w, t3, r4
    mov r2, c10
    mad_pp r2, r3.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r2.x, r1.z, r2.w
    mul_pp r1.xyw, r1, r2.x
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyw, r3.xyzz, r0, r1
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c5.y, r2
    mul_pp r0.xyw, r0, r4.xyzz
    mul_pp r0.xyw, r0, c1.w
    add r1.xyz, r0.xyww, r0.xyww
    mad r0.xyz, r0.xyww, -r0.z, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c5.x, r2
    mul_pp r0.xyz, r0, r4
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c5.x, r2
    mul_pp r0.xyz, r0, r4
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    lrp_pp r3.xyz, r1.z, c5.y, r2
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r1.xyww, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r1.xyww
    texld_pp r4, t1, s0
    texld_pp r2, r2, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r3
    add_pp r0.xyz, r0, r0
    nrm r3.xyz, r1.xyww
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    mad_pp r0.xyz, r1.xyww, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c5.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.xyw, r0.w, r1
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c5.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c2.w
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 73 instruction slots used (5 texture, 68 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c2.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c2.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 73 instruction slots used (5 texture, 68 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c2.w, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r4.xyzz
    mul_pp r2.x, r1.z, r2.w
    mul_pp r1.xyw, r1, r2.x
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, r2, -c6.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c6.y
    mad_pp r2.xyz, r2.z, r2.xyww, c6.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c6.w
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c6.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c6.y
    mad_pp r2.xyz, r2.z, r2.xyww, c6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c6.w
    mad_pp r2.xyz, r5, c6.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r4.xyzz
    mul_pp r2.x, r1.z, r2.w
    mul_pp r1.xyw, r1, r2.x
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c6.w, r2
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c6.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c6.w, r3
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c6.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c6.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c6.w, r4
    mad_pp r2.xyz, r5, c6.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 83 instruction slots used (6 texture, 77 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c2.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c2.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 83 instruction slots used (6 texture, 77 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c2.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r2.w, r1.xyww, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r1.xyww
    nrm r5.xyz, r1.xyww
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r1.xyw, r6.xyzz, c5.z
    exp r5.x, r1.x
    exp r5.y, r1.y
    exp r5.z, r1.w
    mul_sat_pp r1.xyw, r5.xyzz, c5.w
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r4.w, r1.z, r2.w
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r4.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, r3, -c6.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c6.y
    mad_pp r2.xyz, r2.z, r2.xyww, c6.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c6.w
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c6.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c6.y
    mad_pp r2.xyz, r2.z, r2.xyww, c6.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c6.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c6.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r2.w, r1.xyww, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r1.xyww
    nrm r5.xyz, r1.xyww
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r1.xyw, r6.xyzz, c5.z
    exp r5.x, r1.x
    exp r5.y, r1.y
    exp r5.z, r1.w
    mul_sat_pp r1.xyw, r5.xyzz, c5.w
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r4.w, r1.z, r2.w
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r4.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c6.w, r3
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c6.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 89 instruction slots used (6 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c6.w, r3
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c6.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c6.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 89 instruction slots used (6 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c6.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c6.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c2.y
    mad_pp r1.xyz, r6.z, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r6.xyzz, c3.x
    mad_pp r3.xyw, r3.z, r3, c3.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c2.y
    mad_pp r3.xyz, r6.z, r3, c2.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.x
    mad_pp r3.xyz, r6.z, r3, c3.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c3.x, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c2.z, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 118 instruction slots used (5 texture, 113 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c3.x, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c3.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c2.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 118 instruction slots used (5 texture, 113 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c3.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    add r1.xyz, r4, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c6.y
    mad_pp r1.xyz, r6.z, r1, c6.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c6.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r6.xyzz, c23.x
    mad_pp r3.xyw, r3.z, r3, c23.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c6.y
    mad_pp r3.xyz, r6.z, r3, c6.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c23.x
    mad_pp r3.xyz, r6.z, r3, c23.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c6.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    lrp_pp r1.xyz, r6.z, c23.x, r4
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c6.z, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c23.x, r3
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c6.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c23.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c6.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c23.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c6.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c2.y
    mad_pp r1.xyz, r6.z, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c3.x
    mad_pp r6.xyw, r6.z, r6, c3.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c2.y
    mad_pp r6.xyw, r6.z, r6, c2.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c3.x
    mad_pp r6.xyw, r6.z, r6, c3.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c3.x, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c2.z, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 128 instruction slots used (6 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c3.x, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c3.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c2.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 128 instruction slots used (6 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c3.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c6.y
    mad_pp r1.xyz, r6.z, r1, c6.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c23.x
    mad_pp r6.xyw, r6.z, r6, c23.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c6.y
    mad_pp r6.xyw, r6.z, r6, c6.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c23.x
    mad_pp r6.xyw, r6.z, r6, c23.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c6.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c23.x, r1
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c6.z, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (6 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c23.x, r1
    mad_pp r0.xyz, r3, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c23.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c6.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 134 instruction slots used (6 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c23.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c6.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c2.y
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    mad_pp r0.xyz, r2, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyw, r2.z, r2, c3.z
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r5, t1, s0
    texld_pp r4, r4, s3
    mul_pp r2.xyw, r2, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    nrm r6.xyz, r3
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c2.y
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    mad_pp r2.xyz, r2, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c3.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, -c2.y, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c3.y, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c3.y, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.xyz, r0, r0.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, -c2.y, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c3.y, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3.yzww
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3.yzww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r4, t2, s1
    texld_pp r5, t1, s0
    mad_pp r0.xyz, r5, r1, r0
    mul_pp r1.w, r5.w, c0.w
    add r2.xyw, r4.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c7.y
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    mad_pp r0.xyz, r2, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, r3.xyzz, c23.y
    mad_pp r2.xyw, r2.z, r2, c23.z
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r5, t1, s0
    texld_pp r4, r4, s3
    mul_pp r2.xyw, r2, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    nrm r6.xyz, r3
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c7.y
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    mad_pp r2.xyz, r2, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3.yzww
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3.yzww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r4, t2, s1
    texld_pp r5, t1, s0
    mad_pp r0.xyz, r5, r1, r0
    mul_pp r1.w, r5.w, c0.w
    lrp_pp r3.yzw, r2.z, c23.y, r4.xxyz
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, -c7.y, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c23.y, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c23.y, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.xyz, r0, r0.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, -c7.y, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c23.y, r4
    mad_pp r2.xyz, r5, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c2.y
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    mad_pp r0.xyz, r2, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyw, r2.z, r2, c3.z
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r2, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c2.y
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c3.y
    mad_pp r2.xyz, r2.z, r2.xyww, c3.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c3.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, -c2.y, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c3.y, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c3.y, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, -c2.y, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c3.y, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r4, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.yzw, r0.xxyz, r0.w
    mad_pp r5.xyz, r3.yzww, c8.w, -r2.xyww
    nrm r6.xyz, r2.xyww
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r6, t1, s7
    texld_pp r5, r5, s3
    log r7.x, r6.x
    log r7.y, r6.y
    log r7.z, r6.z
    mul r2.xyw, r7.xyzz, c5.z
    exp r6.x, r2.x
    exp r6.y, r2.y
    exp r6.z, r2.w
    mul_sat_pp r2.xyw, r6.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c7.y
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    mad_pp r0.xyz, r2, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, r3.xyzz, c23.y
    mad_pp r2.xyw, r2.z, r2, c23.z
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r2, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c7.y
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c23.y
    mad_pp r2.xyz, r2.z, r2.xyww, c23.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r4, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.yzw, r0.xxyz, r0.w
    mad_pp r5.xyz, r3.yzww, c8.w, -r2.xyww
    nrm r6.xyz, r2.xyww
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r6, t1, s7
    texld_pp r5, r5, s3
    log r7.x, r6.x
    log r7.y, r6.y
    log r7.z, r6.z
    mul r2.xyw, r7.xyzz, c5.z
    exp r6.x, r2.x
    exp r6.y, r2.y
    exp r6.z, r2.w
    mul_sat_pp r2.xyw, r6.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    texld_pp r4, t2, s1
    lrp_pp r3.yzw, r2.z, c23.y, r4.xxyz
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, -c7.y, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c23.y, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c23.y, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, -c7.y, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c23.y, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.y
    mad_pp r1.xyz, r7.z, r1, c3.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, r3, -c2.y
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.y
    mad_pp r1.xyz, r7.z, r1, c3.z
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, -c2.y
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r4.xyzz, c3.y
    mad_pp r3.xyw, r3.z, r3, c3.z
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r0.w, r1
    mov_pp oC0, r4

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, r8, -c2.y
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.y
    mad_pp r3.xyz, r7.z, r3, c3.z
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, c3.y, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, -c2.y, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, c3.y, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, -c2.y
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c3.y, r4
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r0.w, r1
    mov_pp oC0, r4

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, -c2.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, c3.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov_pp r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mul_sat_pp r0.yzw, r6.xxyz, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r0.yzw, r0, r7.z
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    mad_pp r0.yzw, r8.xxyz, r1.xxyz, r0
    mul_pp r1.w, r8.w, c0.w
    dp3 r2.w, r5, r2
    mul r2.xyz, r2, r2.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    add r2.xyz, r3, c24.y
    mad_pp r2.xyz, r7.z, r2, c24.z
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, r3, -c23.y
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c24.y
    mad_pp r1.xyz, r7.z, r1, c24.z
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, -c23.y
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r4.xyzz, c24.y
    mad_pp r3.xyw, r3.z, r3, c24.z
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, r8, -c23.y
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c24.y
    mad_pp r3.xyz, r7.z, r3, c24.z
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c23.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mul_sat_pp r0.yzw, r6.xxyz, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r0.yzw, r0, r7.z
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    mad_pp r0.yzw, r8.xxyz, r1.xxyz, r0
    mul_pp r1.w, r8.w, c0.w
    dp3 r2.w, r5, r2
    mul r2.xyz, r2, r2.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    lrp_pp r2.xyz, r7.z, c24.y, r3
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, -c23.y, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.z, c24.y, r3
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, -c23.y
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c24.y, r4
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, -c23.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.z, c24.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c23.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.y
    mad_pp r1.xyz, r7.z, r1, c3.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, r1, -c2.y
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.y
    mad_pp r1.xyz, r7.z, r1, c3.z
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c3.y
    mad_pp r4.xyz, r7.z, r4, c3.z
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, r4, -c2.y
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c3.y
    mad_pp r4.xyz, r7.z, r4, c3.z
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r4, c2.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, c3.y, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, -c2.y, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, c3.y, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, c3.y, r4
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, -c2.y, r4
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, c3.y, r4
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov_pp r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r0.yzw, r0, r6.xxyz
    mul_pp r0.yzw, r7.z, r0
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    dp3 r1.w, r5, r2
    mul r2.xyz, r2, r1.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.yzw, r3.xxyz, r1.xxyz, r0
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c24.y
    mad_pp r2.xyz, r7.z, r2, c24.z
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, r1, -c23.y
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.y
    mad_pp r1.xyz, r7.z, r1, c24.z
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c24.y
    mad_pp r4.xyz, r7.z, r4, c24.z
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, r4, -c23.y
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c24.y
    mad_pp r4.xyz, r7.z, r4, c24.z
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r4, c23.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r0.yzw, r0, r6.xxyz
    mul_pp r0.yzw, r7.z, r0
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    dp3 r1.w, r5, r2
    mul r2.xyz, r2, r1.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.yzw, r3.xxyz, r1.xxyz, r0
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r7.z, c24.y, r2
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, -c23.y, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.z, c24.y, r1
    mad_pp r0.xyz, r3, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, c24.y, r4
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, -c23.y, r4
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.z, c24.y, r4
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r8, c23.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c2.w
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c2.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c2.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c2.w, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c5.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r4.xyzz
    mul_pp r2.x, r1.z, r2.w
    mul_pp r1.xyw, r1, r2.x
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, r2, -c5.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.xyw, r3.xyzz, c5.y
    mad_pp r2.xyz, r2.z, r2.xyww, c5.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, r3, -c5.w
    mad_pp r0.xyz, r4, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c5.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.xyw, r4.xyzz, c5.y
    mad_pp r2.xyz, r2.z, r2.xyww, c5.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, r4, -c5.w
    mad_pp r2.xyz, r5, c5.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c5.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c5.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r4.xyzz
    mul_pp r2.x, r1.z, r2.w
    mul_pp r1.xyw, r1, r2.x
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.z, c5.w, r2
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c5.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.z, c5.w, r3
    mad_pp r0.xyz, r4, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c5.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c5.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.z, c5.w, r4
    mad_pp r2.xyz, r5, c5.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c5.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c2.y
    mad_pp r2.xyz, r2.z, r2.xyww, c2.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c2.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c2.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c2.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c2.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c7
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c7.x, c7.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c7.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r2.w, r1.xyww, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r1.xyww
    nrm r5.xyz, r1.xyww
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r1.xyw, r6.xyzz, c5.z
    exp r5.x, r1.x
    exp r5.y, r1.y
    exp r5.z, r1.w
    mul_sat_pp r1.xyw, r5.xyzz, c5.w
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r4.w, r1.z, r2.w
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r4.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, r3, -c7.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.xyw, r3.xyzz, c7.y
    mad_pp r2.xyz, r2.z, r2.xyww, c7.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, r3, -c7.w
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, r3, -c7.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    add r2.xyw, r3.xyzz, c7.y
    mad_pp r2.xyz, r2.z, r2.xyww, c7.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, r3, -c7.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c7
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c7.x, c7.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c7.z
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.yzw, r0, r1.xxyw
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r2.w, r1.xyww, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r1.xyww
    nrm r5.xyz, r1.xyww
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r1.xyw, r6.xyzz, c5.z
    exp r5.x, r1.x
    exp r5.y, r1.y
    exp r5.z, r1.w
    mul_sat_pp r1.xyw, r5.xyzz, c5.w
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r4.w, r1.z, r2.w
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r4.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1.xxyw
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c7.w, r3
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c7.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.z, c7.w, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    lrp_pp r4.xyz, r2.z, c7.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c7.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r2.xyw, r2.w, c0.xyzz, r1.w
    mul_pp r1.xyz, r1, r2.xyww
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.z, c7.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c2.y
    mad_pp r1.xyz, r6.z, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r6.xyzz, c3.x
    mad_pp r3.xyw, r3.z, r3, c3.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c2.y
    mad_pp r3.xyz, r6.z, r3, c2.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.x
    mad_pp r3.xyz, r6.z, r3, c3.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c3.x, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c2.z, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c3.x, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c3.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c2.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c3.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c5
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c5.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    add r1.xyz, r4, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c5.y
    mad_pp r1.xyz, r6.z, r1, c5.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c23.x
    mad_pp r1.xyz, r6.z, r1, c23.y
    mad_pp r0.xyz, r1, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c5.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    add r3.xyw, r6.xyzz, c23.x
    mad_pp r3.xyw, r3.z, r3, c23.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c5.y
    mad_pp r3.xyz, r6.z, r3, c5.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c23.x
    mad_pp r3.xyz, r6.z, r3, c23.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c5.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c5.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c5
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c5.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    lrp_pp r1.xyz, r6.z, c23.x, r4
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c5.z, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.z, c23.x, r3
    mad_pp r0.xyz, r1, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c5.z
    mad_pp r3.xyw, r3.w, c0.xyzz, r1.w
    mul_pp r2.xyz, r2, r3.xyww
    lrp_pp r7.xyz, r3.z, c23.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c5.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.z, c23.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c5.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c5.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c2.y
    mad_pp r1.xyz, r6.z, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.z, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c3.x
    mad_pp r6.xyw, r6.z, r6, c3.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c2.y
    mad_pp r6.xyw, r6.z, r6, c2.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c3.x
    mad_pp r6.xyw, r6.z, r6, c3.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c3.x, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c2.z, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c3.x, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c3.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c2.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c3.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c23
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c23.x, c23.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c23.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.x
    mad_pp r1.xyz, r6.z, r1, c24.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.y
    mad_pp r1.xyz, r6.z, r1, c23.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.x
    mad_pp r1.xyz, r6.z, r1, c24.y
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c24.x
    mad_pp r6.xyw, r6.z, r6, c24.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c23.y
    mad_pp r6.xyw, r6.z, r6, c23.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r6.xyw, r7.xyzz, c24.x
    mad_pp r6.xyw, r6.z, r6, c24.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c23.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c23
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c23.x, c23.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c23.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c24.x, r1
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c23.z, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.z, c24.x, r1
    mad_pp r0.xyz, r3, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c24.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c23.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.z, c24.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c23.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r1.xyw, r3.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r1.xyw, r3.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.x
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r1.xyw, r3.xyzz, c2.y
    mad_pp r1.xyz, r1.z, r1.xyww, c2.z
    mad_pp r0.xyz, r1, c2.w, r0
    add_pp r2.xyz, r0, -c2.x
    mov_pp oC0, r2

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    add r1.xyw, r2.xyzz, c2.y
    mad_pp r1.xyw, r1.z, r1, c2.z
    texld_pp r2, t1, s7
    texld_pp r3, t1, s0
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    add r2.xyz, r3, c2.y
    mad_pp r2.xyz, r1.z, r2, c2.x
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    add r2.xyz, r3, c2.y
    mad_pp r2.xyz, r1.z, r2, c2.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.w, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c2.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c2.x, r3
    mul_pp r2.xyz, r0, r4
    mov_pp oC0, r2

// approximately 77 instruction slots used (5 texture, 72 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c2.y, r3
    mad_pp r0.xyz, r4, c2.z, r0
    add_pp r2.xyz, r0, c2.w
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    lrp_pp r3.xyz, r1.z, c2.y, r2
    texld_pp r2, t1, s7
    texld_pp r4, t1, s0
    mul_pp r1.xyw, r3.xyzz, r4.xyzz
    mul_pp r3.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    lrp_pp r2.xyz, r1.z, c2.x, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 77 instruction slots used (5 texture, 72 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    lrp_pp r2.xyz, r1.z, c2.y, r3
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.z, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.w
    mad_pp r3.xyz, r2, r0, r1.xyww
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c6
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.x, r0.x, r1.w
    mul r0.x, r0.y, r0.x
    mov r1.w, c15.w
    add r1.xyz, -t0, c15
    dp4 r1.w, r1, r1
    nrm r3.xyz, r1
    mad r3.w, r1.w, -c15.w, r2.x
    dp3_sat r0.z, t3, r3
    dp3 r0.w, r3, -c16
    mov r1.w, c16.w
    mad_sat r0.w, r0.w, r1.w, c17.w
    mul r0.z, r0.z, r3.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r2.x, r3.x
    log r2.y, r3.y
    log r2.z, r3.z
    mul r1.xyw, r2.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r3.x, r2, t3
    mul r3.xyz, r3.x, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r4, r2, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r3.w, r3.w, c0.w
    texld_pp r4, t2, s1
    add r1.xyw, r4.xyzz, c6.y
    mad_pp r1.xyz, r1.z, r1.xyww, c6.z
    mul_pp r0.xyz, r0, r1
    mul_pp r0.xyz, r0, c1.w
    add r1.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r1.xyw, r3.xyzz, c6.y
    mad_pp r1.xyz, r1.z, r1.xyww, c6.x
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r1.xyw, r3.xyzz, c6.y
    mad_pp r1.xyz, r1.z, r1.xyww, c6.z
    mad_pp r0.xyz, r1, c6.w, r0
    add_pp r0.xyz, r0, -c6.x
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    add r1.xyw, r2.xyzz, c6.y
    mad_pp r1.xyw, r1.z, r1, c6.z
    texld_pp r2, t1, s7
    texld_pp r3, t1, s0
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    add r2.xyz, r3, c6.y
    mad_pp r2.xyz, r1.z, r2, c6.x
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    add r2.xyz, r3, c6.y
    mad_pp r2.xyz, r1.z, r2, c6.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c6.w, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.x
    dp3_sat r0.y, t3, r1
    dp3 r0.w, r1, -c13
    mov r2.w, c13.w
    mad_sat r0.w, r0.w, r2.w, c14.w
    mul r0.y, r0.y, r1.w
    mul r1.x, r0.w, r0.y
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r0.x
    dp3_sat r0.x, t3, r3
    dp3 r0.y, r3, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r0.x, r0.x, r3.w
    mul r1.y, r0.y, r0.x
    max r0.xy, r1, t2.z
    min r1.xy, t2.w, r0
    mov r2.xyz, c14
    mad_pp r0.xyw, r1.x, r2.xyzz, c22.xyzz
    mad_pp r0.xyw, r1.y, c17.xyzz, r0
    dp3 r1.x, -c18, t3
    mul r1.y, r1.x, c9.z
    max r2.x, r1.x, r1.y
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyw, r2.x, c19.xyzz, r0
    mad_pp r0.xyw, r2.y, c21.xyzz, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyw, r1.y, c4.xyzz, r0
    add_pp r2.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r2.w
    mul_pp r0.xyw, r0, r1
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r2.w, t3, r3
    mov r3, c10
    mad_pp r3, r2.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r2.w, r1.z, r3.w
    dp3 r3.x, r2, t3
    mul r3.xyz, r3.x, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r4, r2, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r1.xyw, r2.w, r1
    mad_pp r0.xyw, r3.xyzz, r0, r1
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c6.y, r3
    mul_pp r0.xyw, r0, r4.xyzz
    mul_pp r0.xyw, r0, c1.w
    add r1.xyz, r0.xyww, r0.xyww
    mad r0.xyz, r0.xyww, -r0.z, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c6.x, r3
    mul_pp r0.xyz, r0, r4
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 83 instruction slots used (5 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    mad_pp r0.xyz, r3, r0, r1.xyww
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.z, c6.y, r3
    mad_pp r0.xyz, r4, c6.z, r0
    add_pp r0.xyz, r0, c6.w
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    lrp_pp r3.xyz, r1.z, c6.y, r2
    texld_pp r2, t1, s7
    texld_pp r4, t1, s0
    mul_pp r1.xyw, r3.xyzz, r4.xyzz
    mul_pp r3.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    lrp_pp r2.xyz, r1.z, c6.x, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 83 instruction slots used (5 texture, 78 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r1.xyw, r1.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r1.xyww
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r1.xyw, r3.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r3.xyz, r2
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r2.xyz, r3, c8.w, -r2
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r1.xyw, r1, r2.xyzz
    mul_pp r1.xyw, r0.w, r1
    lrp_pp r2.xyz, r1.z, c6.y, r3
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c6.z, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.w
    mad_pp r0.xyz, r2, r0, r1.xyww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.w
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.x
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.w
    mad_pp r0.xyz, r2, c3.x, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.z, r3, c2.w
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.z, r3, c2.x
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.z, r3, c2.w
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r3, c3.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.z, c2.z, r2
    mul_pp r0.xyz, r0, r3
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.z, c2.x, r2
    mul_pp r1.xyz, r0, r3
    mov_pp oC0, r1

// approximately 122 instruction slots used (5 texture, 117 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.z, c2.z, r2
    mad_pp r0.xyz, r3, c2.w, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c2.z, r3
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c2.x, r3
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 122 instruction slots used (5 texture, 117 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c2.z, r3
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r7, c2.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.z, r2, c6.w
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mov r3.xyz, c1
    mad r0.xyz, r0, -c23.x, r3
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 131 instruction slots used (5 texture, 126 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.z, r2, c6.x
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.z, r2, c6.w
    mad_pp r0.xyz, r2, c23.x, r0
    add_pp r0.xyz, r0, -c6.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.z, r3, c6.w
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.z, r3, c6.x
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.z, r3, c6.w
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r3, c23.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c6
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    mul r1.w, r0.x, r1.w
    dp3 r0.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r0.x, c13.w, r3.w
    mul r0.x, r1.w, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r1.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r1.w, -c15.w, r2.x
    dp3_sat r3.w, t3, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r0.y, r1.w, r3.w
    max r2.xy, r0, t2.z
    min r0.xy, t2.w, r2
    dp3 r1.w, -r5, t3
    add r1.w, r1.w, r1.w
    mad r2.xyz, t3, -r1.w, -r5
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r2, r5
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r2.xyz, r1.w, c17
    mul r2.xyz, r0.y, r2
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r3.w, r1, r5
    max r4.w, r3.w, c6.y
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r0.x, r2
    dp3 r1.w, -c18, t3
    mul r3.w, r1.w, c9.z
    max r2.x, r1.w, r3.w
    dp3 r2.y, -c20, t3
    max r0.zw, r2.xyxy, t2.z
    min r2.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r2.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r3.w, t3, r5
    mov r5, c10
    mad_pp r5, r3.w, r5, c11
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r2.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r3.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r4, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r4
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r3, t2, s1
    lrp_pp r2.xyz, r6.z, c6.z, r3
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.z, c6.x, r2
    mul_pp r0.xyz, r0, r3
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 128 instruction slots used (5 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.z, c6.z, r2
    mad_pp r0.xyz, r3, c6.w, r0
    add_pp r0.xyz, r0, -c6.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c6.z, r3
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c6.x, r3
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 128 instruction slots used (5 texture, 123 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.z, c6.z, r3
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r7, c6.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.w
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.x
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.w
    mad_pp r0.xyz, r2, c3.x, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c1, r0
    add_pp r0.w, -r2.w, c2.x
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r2.xyww
    add r2.xyw, r3.xyzz, c2.z
    mad_pp r2.xyw, r2.z, r2, c2.w
    dp3 r0.w, r4, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r2, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.x
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c2.z
    mad_pp r2.xyz, r6.z, r2, c2.w
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c3.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c2.z, r3
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c2.x, r3
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 112 instruction slots used (4 texture, 108 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c2.z, r3
    mad_pp r0.xyz, r2, c2.w, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c1, r0
    add_pp r0.w, -r2.w, c2.x
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r2.xyww
    lrp_pp r6.xyz, r2.z, c2.z, r3
    dp3 r0.w, r4, t3
    mul r2.xyw, r0.w, t3.xyzz
    mad_pp r3.xyz, r2.xyww, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r6.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.z, c2.x, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 112 instruction slots used (4 texture, 108 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.z, c2.z, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c2.w, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.z, r2, c5.w
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mov r3.xyz, c1
    mad r0.xyz, r0, -c6.x, r3
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 121 instruction slots used (4 texture, 117 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.z, r2, c5.x
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailBeforeReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.z, r2, c5.w
    mad_pp r0.xyz, r2, c6.x, r0
    add_pp r0.xyz, r0, -c5.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c4, r0
    add_pp r0.w, -r2.w, c5.x
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r2.xyww
    add r2.xyw, r3.xyzz, c5.z
    mad_pp r2.xyw, r2.z, r2, c5.w
    dp3 r0.w, r4, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r2, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c5.z
    mad_pp r2.xyz, r6.z, r2, c5.x
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskDetailAfterReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c5.z
    mad_pp r2.xyz, r6.z, r2, c5.w
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c6.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c5.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c5
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    mul r1.w, r0.x, r1.w
    dp3 r0.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r0.x, c13.w, r3.w
    mul r0.x, r1.w, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r1.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r1.w, -c15.w, r2.x
    dp3_sat r3.w, t3, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r0.y, r1.w, r3.w
    max r2.xy, r0, t2.z
    min r0.xy, t2.w, r2
    dp3 r1.w, -r5, t3
    add r1.w, r1.w, r1.w
    mad r2.xyz, t3, -r1.w, -r5
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r2, r5
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r2.xyz, r1.w, c17
    mul r2.xyz, r0.y, r2
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r3.w, r1, r5
    max r4.w, r3.w, c5.y
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r0.x, r2
    dp3 r1.w, -c18, t3
    mul r3.w, r1.w, c9.z
    max r2.x, r1.w, r3.w
    dp3 r2.y, -c20, t3
    max r0.zw, r2.xyxy, t2.z
    min r2.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r2.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r3.w, t3, r5
    mov r5, c10
    mad_pp r5, r3.w, r5, c11
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r2.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r3.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r4, r2, s3
    mul_pp r2.xyz, r5, r4
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c5.z, r3
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c5.x, r3
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 118 instruction slots used (4 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.z, c5.z, r3
    mad_pp r0.xyz, r2, c5.w, r0
    add_pp r0.xyz, r0, -c5.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_multiply, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c4, r0
    add_pp r0.w, -r2.w, c5.x
    mad_pp r2.xyw, r2.w, c0.xyzz, r0.w
    mul_pp r0.xyz, r0, r2.xyww
    lrp_pp r6.xyz, r2.z, c5.z, r3
    dp3 r0.w, r4, t3
    mul r2.xyw, r0.w, t3.xyzz
    mad_pp r3.xyz, r2.xyww, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r6.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_multiply, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.z, c5.x, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 118 instruction slots used (4 texture, 114 arithmetic)
		};
#endif
	}
}

Technique ReflectionMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskReflection(detail_function_biased_add, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.z, c5.z, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c5.w, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c5.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}