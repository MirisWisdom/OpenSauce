#include "include/util/reflection.fx"

#include "include/model/model_shared_variables.fx"
#include "include/model/normals.fx"
#include "include/model/lighting.fx"
#include "include/model/specular_color.fx"

struct PS_INPUT{
 	float  		Fog				: FOG;
 	float3 		Position3D		: TEXCOORD0;
 	float4 		DiffuseMultiUV	: TEXCOORD1;
 	float4 		DetailUV 		: TEXCOORD2;
	float3x3 	TBNTranspose 	: TEXCOORD3;
	float4 		NormalDetailUV	: TEXCOORD6; 
};

///////////////////////////////////////////////////////////////////////////////
// Pixel Shader 2.0 shaders
///////////////////////////////////////////////////////////////////////////////
half4 ModelMaskMultipurpose(PS_INPUT IN,
    uniform const int nDetailFunction,
    uniform const bool bDetailBeforeReflection,
    uniform const bool bPlanarAtmosphericFog,
    uniform const bool bInverse,
	uniform const bool bBaseNorm,
	uniform const bool bDetailNorm,
	uniform const bool bSpecMap,
	uniform const bool bSpecLighting) : COLOR
{
	half4 Diff = 0;
	half3 Reflect = 0;
	half4 Spec = 1;

	half4 T0 = tex2D( TexSampler0, IN.DiffuseMultiUV.xy );
	half4 T1 = tex2D( TexSampler1, IN.DetailUV.xy );
	half4 T2 = tex2D( TexSampler2, IN.DiffuseMultiUV.xy );
	half4 T4 = tex2D( TexSampler4, IN.DiffuseMultiUV.xy );
	half4 T5 = tex2D( TexSampler5, IN.NormalDetailUV.xy );
	half4 T6 = tex2D( TexSampler6, IN.NormalDetailUV.zw );
	
	// get the world space normals
	float3 Normals = GetNormals(bBaseNorm, bDetailNorm,	IN.TBNTranspose, T4, T5.xy, T6.xy);

	float3 EyeVector = c_eye_view_position.xyz - IN.Position3D;
	float3 EyeVectorNorm = normalize(EyeVector);

	float4 SpecularMap = 1;
	if(bSpecMap)
	{
		SpecularMap = tex2D(TexSampler7, IN.DiffuseMultiUV.xy);
		SpecularMap.xyz = saturate(pow(SpecularMap.xyz, c_specular_color_map_exponent) * c_specular_color_map_coefficient);
		SpecularMap.w = lerp(1, SpecularMap.w, c_spec_color_exponent_mask_toggle);
	}	
	
	Spec = GetSpecularColor(Normals, EyeVectorNorm,	SpecularMap, c_object_perpendicular_colour, c_object_parallel_colour);
	
	// calculate the lighting contributions
	LightVectorSet LightVectors = GetLightVectors(IN.Position3D);
	float4 LightAttenuations = GetLightAttenuations(LightVectors, Normals, IN.DetailUV.w);

	float3 DiffuseLighting = GetDiffuseLighting(LightAttenuations);
	float3 SpecularLighting = 0;
	if(bSpecLighting)
	{
		SpecularLighting = GetSpecularLighting(Normals, EyeVectorNorm,
			LightVectors, LightAttenuations,
			Spec.rgb, SpecularMap.w, T2.b);
	}		
	Diff.rgb = DiffuseLighting;
	Diff.a = IN.DetailUV.z;
		
	// get the reflection vector
	Reflect = GetReflectionVector(EyeVector, Normals);
	
	half4 T3 = texCUBE( TexSampler3, Reflect );

	half4 R0;
	half4 R1;
	half4 D0 = Diff;
	half4 D1 = Spec;
	half3 SRCCOLOR;
	half SRCALPHA;

	// combiner 0

	// combiner 1
	D0.rgb	= D0 + (T2.g*c_self_illumination_color);

	// combiner 2
	R1.a	= T2.b*D1.a;
	R0		= (T2.a*c_primary_change_color) + (1-T2.a);

	// combiner 3
	if(detail_function_multiply==nDetailFunction)
	{
		T1.rgb = bInverse ? lerp( T1, 1.0, T2.r ) : lerp( 1.0, T1, T2.r );
	}
	else
	{
		T1.rgb = bInverse ? lerp( T1, 0.5, T2.r ) : lerp( 0.5, T1, T2.r );
	}

	// combiner 4
	T3.rgb	= T3*D1;
	D0.rgb	= D0*R0;

	if(bDetailBeforeReflection)
	{
		// combiner 6
		R0.rgb = (T0*D0) + (T3*R1.a);

		// combiner 7
		if(detail_function_biased_multiply==nDetailFunction)
		{
			R0.rgb	= (R0*T1)*2;
		}
		else if(detail_function_multiply==nDetailFunction)
		{
			R0.rgb	= R0*T1;
		}
		else if(detail_function_biased_add==nDetailFunction)
		{
			R0.rgb	= R0+((2*T1)-1);
		}
	}
	else
	{
		// combiner 6
		if(detail_function_biased_multiply==nDetailFunction)
		{
			T0.rgb	= (T0*T1)*2;
		}
		else if(detail_function_multiply==nDetailFunction)
		{
			T0.rgb	= T0*T1;
		}
		else if(detail_function_biased_add==nDetailFunction)
		{
			T0.rgb	= T0+((2*T1)-1);
		}

		// combiner 7
		R0.rgb = (T0*D0) + (T3*R1.a);
	}
	
	R0.rgb += SpecularLighting;

	if(bPlanarAtmosphericFog)
	{
		// combiner 5
		R1.rgb	= saturate(c_fog_color_correction_1 - (D0.a*c_fog_color_correction_E));

		// final combiner
		SRCCOLOR = lerp((R0*c_fog_color_correction_0.a), c_fog_color_correction_0, D0.a) + R1;
	}
	else
	{
		// final combiner
		SRCCOLOR = R0;
	}

	SRCALPHA = T0.a * c_primary_change_color.a;

	return half4( SRCCOLOR, SRCALPHA );
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    add r1.yzw, r2.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.z
    mul_pp r0.xyz, r0, r1
    add_pp r3.xyz, r0, r0
    mov_pp oC0, r3

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    add r1.yzw, r2.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.x
    mul_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    add r1.yzw, r2.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.z
    mad_pp r0.xyz, r1, c2.w, r0
    add_pp r3.xyz, r0, -c2.x
    mov_pp oC0, r3

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    add r2.xyz, r2, c2.y
    mad_pp r1.xyw, r1.x, r2.xyzz, c2.z
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    nrm r5.xyz, r2
    dp3 r0.w, t3, r5
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mad_pp r4.xyz, r1.xyww, r0.w, r0
    mov_pp oC0, r4

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.y
    mad_pp r3.xyz, r1.x, r3, c2.x
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.y
    mad_pp r3.xyz, r1.x, r3, c2.z
    mad_pp r2.xyz, r3, c2.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 69 instruction slots used (4 texture, 65 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c2.y, r2
    mul_pp r0.xyz, r0, r4
    add_pp r3.xyz, r0, r0
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c2.y, r2
    mad_pp r0.xyz, r4, c2.z, r0
    add_pp r3.xyz, r0, c2.w
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    lrp_pp r3.xyz, r1.x, c2.y, r2
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r1.xyww, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r1.xyww
    texld_pp r4, t1, s0
    texld_pp r2, r2, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r3
    add_pp r0.xyz, r0, r0
    nrm r3.xyz, r1.xyww
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    mad_pp r4.xyz, r1.xyww, r0.w, r0
    mov_pp oC0, r4

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiply
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 67 instruction slots used (4 texture, 63 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAdd
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.y, r3
    mad_pp r2.xyz, r4, c2.z, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 68 instruction slots used (4 texture, 64 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c5
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.x, r0.x, r1.w
    mul r0.x, r0.y, r0.x
    mov r1.w, c15.w
    add r1.xyz, -t0, c15
    dp4 r1.w, r1, r1
    nrm r3.xyz, r1
    mad r3.w, r1.w, -c15.w, r2.x
    dp3_sat r0.z, t3, r3
    dp3 r0.w, r3, -c16
    mov r1.w, c16.w
    mad_sat r0.w, r0.w, r1.w, c17.w
    mul r0.z, r0.z, r3.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r3, r4
    mul_pp r0.w, r1.z, r4.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r4.w, r4.w, c0.w
    add r1.yzw, r3.xxyz, c5.y
    mad_pp r1.xyz, r1.x, r1.yzww, c5.z
    mul_pp r0.xyz, r0, r1
    mul_pp r0.xyz, r0, c1.w
    add r1.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    add r1.yzw, r2.xxyz, c5.y
    mad_pp r1.xyz, r1.x, r1.yzww, c5.x
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    add r1.yzw, r2.xxyz, c5.y
    mad_pp r1.xyz, r1.x, r1.yzww, c5.z
    mad_pp r0.xyz, r1, c5.w, r0
    add_pp r0.xyz, r0, -c5.x
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    add r2.xyz, r2, c5.y
    mad_pp r1.xyw, r1.x, r2.xyzz, c5.z
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    nrm r5.xyz, r2
    dp3 r0.w, t3, r5
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r2.w
    mad_pp r0.xyz, r1.xyww, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c5.y
    mad_pp r3.xyz, r1.x, r3, c5.x
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c5.y
    mad_pp r3.xyz, r1.x, r3, c5.z
    mad_pp r2.xyz, r3, c5.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c5.x
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 75 instruction slots used (4 texture, 71 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 2, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.x
    dp3_sat r0.y, t3, r1
    dp3 r0.w, r1, -c13
    mov r2.w, c13.w
    mad_sat r0.w, r0.w, r2.w, c14.w
    mul r0.y, r0.y, r1.w
    mul r1.x, r0.w, r0.y
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r0.x
    dp3_sat r0.x, t3, r3
    dp3 r0.y, r3, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r0.x, r0.x, r3.w
    mul r1.y, r0.y, r0.x
    max r0.xy, r1, t2.z
    min r1.xy, t2.w, r0
    mov r2.xyz, c14
    mad_pp r0.xyw, r1.x, r2.xyzz, c22.xyzz
    mad_pp r0.xyw, r1.y, c17.xyzz, r0
    dp3 r1.x, -c18, t3
    mul r1.y, r1.x, c9.z
    max r2.x, r1.x, r1.y
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyw, r2.x, c19.xyzz, r0
    mad_pp r0.xyw, r2.y, c21.xyzz, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r2.w, r2, t3
    mul r3.xyz, r2.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyw, r1.y, c4.xyzz, r0
    add_pp r2.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r2.w
    mul_pp r0.xyw, r0, r4.xyzz
    nrm r4.xyz, r2
    dp3 r3.w, t3, r4
    mov r2, c10
    mad_pp r2, r3.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyw, r3.xyzz, r0, r1.yzzw
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c5.y, r2
    mul_pp r0.xyw, r0, r4.xyzz
    mul_pp r0.xyw, r0, c1.w
    add r1.xyz, r0.xyww, r0.xyww
    mad r0.xyz, r0.xyww, -r0.z, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c5.x, r2
    mul_pp r0.xyz, r0, r4
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.xyz, r3, r0, r1.yzww
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c5.y, r2
    mad_pp r0.xyz, r4, c5.z, r0
    add_pp r0.xyz, r0, c5.w
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    lrp_pp r3.xyz, r1.x, c5.y, r2
    add r1.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r1.xyww, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r1.xyww
    texld_pp r4, t1, s0
    texld_pp r2, r2, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r3
    add_pp r0.xyz, r0, r0
    nrm r3.xyz, r1.xyww
    dp3 r0.w, t3, r3
    mov r3, c10
    mad_pp r3, r0.w, r3, c11
    mul_pp r1.xyw, r2.xyzz, r3.xyzz
    mul_pp r0.w, r1.z, r3.w
    mad_pp r0.xyz, r1.xyww, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c5.x, r3
    mul_pp r2.xyz, r2, r4
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 73 instruction slots used (4 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFog
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    add r2.xyz, -t0, c8
    dp3 r0.w, r2, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r2
    texld_pp r1, r1, s2
    texld_pp r3, r3, s3
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c5.x
    mad_pp r4.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r4
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r2, c10
    mad_pp r2, r0.w, r2, c11
    mul_pp r2.xyz, r2, r3
    mul_pp r0.w, r1.z, r2.w
    mul_pp r1.yzw, r0.w, r2.xxyz
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c5.y, r3
    mad_pp r2.xyz, r4, c5.z, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c5.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 74 instruction slots used (4 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c2.w
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 73 instruction slots used (5 texture, 68 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c2.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c2.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 73 instruction slots used (5 texture, 68 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c2.w, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r5.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r5.xxyz
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, r2, -c6.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c6.y
    mad_pp r2.xyz, r2.x, r2.yzww, c6.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c6.w
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c6.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c6.y
    mad_pp r2.xyz, r2.x, r2.yzww, c6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c6.w
    mad_pp r2.xyz, r5, c6.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r5.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r5.xxyz
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c6.w, r2
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c6.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c6.w, r3
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c6.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c6.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, false, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c6.w, r4
    mad_pp r2.xyz, r5, c6.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 83 instruction slots used (6 texture, 77 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c2.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c2.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 83 instruction slots used (6 texture, 77 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c2.x, c2.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c2.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r4.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r4.xxyz
    add r4.xyz, -t0, c8
    dp3 r2.w, r4, r2
    mul r5.xyz, r2, r2.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r5.w, r2, r6
    mov r2, c10
    mad_pp r2, r5.w, r2, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.xxyz, r5.xxyz
    mul_pp r1.yzw, r2.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, r3, -c6.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c6.y
    mad_pp r2.xyz, r2.x, r2.yzww, c6.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c6.w
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c6.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c6.y
    mad_pp r2.xyz, r2.x, r2.yzww, c6.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c6.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c6.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t1, s4
    mad r2.xyz, r2, c6.x, c6.y
    mul r2.xyz, r2, c5.xxyw
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c6.z
    mad_pp r4.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r4.xxyz
    add r4.xyz, -t0, c8
    dp3 r2.w, r4, r2
    mul r5.xyz, r2, r2.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r5.w, r2, r6
    mov r2, c10
    mad_pp r2, r5.w, r2, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.xxyz, r5.xxyz
    mul_pp r1.yzw, r2.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c6.w, r3
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c6.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 89 instruction slots used (6 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c6.w, r3
    mad_pp r0.xyz, r4, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c6.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c6.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 89 instruction slots used (6 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t1, s4
    mad r0.yzw, r2.xxyz, c6.x, c6.y
    mul r0.yzw, r0, c5.xxxy
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c6.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c6.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c6.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c6.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c2.y
    mad_pp r1.xyz, r6.x, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r6.xyz, r6, c3.x
    mad_pp r3.xyw, r3.x, r6.xyzz, c3.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c2.y
    mad_pp r3.xyz, r6.x, r3, c2.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.x
    mad_pp r3.xyz, r6.x, r3, c3.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c3.x, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c2.z, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 118 instruction slots used (5 texture, 113 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c3.x, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c3.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c2.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 118 instruction slots used (5 texture, 113 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c3.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    add r1.xyz, r4, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c6.y
    mad_pp r1.xyz, r6.x, r1, c6.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c6.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r6.xyz, r6, c23.x
    mad_pp r3.xyw, r3.x, r6.xyzz, c23.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c6.y
    mad_pp r3.xyz, r6.x, r3, c6.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c23.x
    mad_pp r3.xyz, r6.x, r3, c23.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c6.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    lrp_pp r1.xyz, r6.x, c23.x, r4
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c6.z, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c23.x, r3
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c6.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c23.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c6.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c23.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c6.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c2.y
    mad_pp r1.xyz, r6.x, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c3.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c3.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c2.y
    mad_pp r6.xyw, r6.x, r7.xyzz, c2.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c3.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c3.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c3.x, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c2.z, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 128 instruction slots used (6 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c3.x, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c3.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c2.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 128 instruction slots used (6 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c2.x, c2.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c3.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c6.y
    mad_pp r1.xyz, r6.x, r1, c6.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mad_pp r0.xyz, r1, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c23.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c23.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c6.y
    mad_pp r6.xyw, r6.x, r7.xyzz, c6.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c23.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c23.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c6.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c6
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r3.xyz, r3, c6.x, c6.y
    mul r3.xyz, r3, c5.xxyw
    mul r4.xyz, r3.y, t4
    mad r3.xyw, t5.xyzz, r3.x, r4.xyzz
    mad r3.xyz, t3, r3.z, r3.xyww
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c6.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c6.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c23.x, r1
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c6.z, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (6 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c23.x, r1
    mad_pp r0.xyz, r3, c6.x, r0
    add_pp r0.xyz, r0, c6.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c23.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c6.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 134 instruction slots used (6 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov_pp r0.z, c6.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t1, s4
    mad r0.xyw, r3.xyzz, c6.x, c6.y
    mul r0.xyw, r0, c5.xxzy
    mul r3.xyz, r0.y, t4
    mad r3.xyz, t5, r0.x, r3
    mad r0.xyw, t3.xyzz, r0.w, r3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c6.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c6.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c6.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c23.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c6.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c6.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c2.y
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    mad_pp r0.xyz, r2, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r3.xyz, r3, c3.y
    mad_pp r2.xyw, r2.x, r3.xyzz, c3.z
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r5, t1, s0
    texld_pp r4, r4, s3
    mul_pp r2.xyw, r2, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    nrm r6.xyz, r3
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c2.y
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    mad_pp r2.xyz, r2, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 90 instruction slots used (7 texture, 83 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c3.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, -c2.y, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c3.y, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c3.y, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.xyz, r0, r0.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, -c2.y, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 88 instruction slots used (7 texture, 81 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c3.y, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 89 instruction slots used (7 texture, 82 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3.yzww
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3.yzww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r4, t2, s1
    texld_pp r5, t1, s0
    mad_pp r0.xyz, r5, r1, r0
    mul_pp r1.w, r5.w, c0.w
    add r2.yzw, r4.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c7.y
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    mad_pp r0.xyz, r2, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r3.xyz, r3, c23.y
    mad_pp r2.xyw, r2.x, r3.xyzz, c23.z
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r5, t1, s0
    texld_pp r4, r4, s3
    mul_pp r2.xyw, r2, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    nrm r6.xyz, r3
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c7.y
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    mad_pp r2.xyz, r2, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 96 instruction slots used (7 texture, 89 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3.yzww
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3.yzww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r4, t2, s1
    texld_pp r5, t1, s0
    mad_pp r0.xyz, r5, r1, r0
    mul_pp r1.w, r5.w, c0.w
    lrp_pp r3.yzw, r2.x, c23.y, r4.xxyz
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, -c7.y, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c23.y, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c23.y, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r3.xyz, r0, r0.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, -c7.y, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 94 instruction slots used (7 texture, 87 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r0.w, r3, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r5.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c23.y, r4
    mad_pp r2.xyz, r5, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 95 instruction slots used (7 texture, 88 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c2.y
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    mad_pp r0.xyz, r2, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r3.xyz, r3, c3.y
    mad_pp r2.xyw, r2.x, r3.xyzz, c3.z
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r2, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c2.y
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c3.y
    mad_pp r2.xyz, r2.x, r2.yzww, c3.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 100 instruction slots used (8 texture, 92 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c3.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, -c2.y, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c3.y, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c3.y, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, -c2.y, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 98 instruction slots used (8 texture, 90 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c2.x, c2.y
    mad r0.zw, r1.xyxy, c2.x, c2.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c2.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c2.z, c2.ywzw
    mad r1.xyz, r1, c2.x, c2.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c3.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c2.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r0.w, -r2.w, -c2.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c3.y, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 99 instruction slots used (8 texture, 91 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r4, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r3.yzw, r2.w, c0.xxyz, r0.w
    mul_pp r1.xyz, r1, r3.yzww
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r3.yzww
    nrm r6.xyz, r3.yzww
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r6, t1, s7
    texld_pp r5, r5, s3
    log r7.x, r6.x
    log r7.y, r6.y
    log r7.z, r6.z
    mul r3.yzw, r7.xxyz, c5.z
    exp r6.x, r3.y
    exp r6.y, r3.z
    exp r6.z, r3.w
    mul_sat_pp r3.yzw, r6.xxyz, c5.w
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c7.y
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    mad_pp r0.xyz, r2, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r3.xyz, r3, c23.y
    mad_pp r2.xyw, r2.x, r3.xyzz, c23.z
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r2, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c7.y
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c23.y
    mad_pp r2.xyz, r2.x, r2.yzww, c23.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c7.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 106 instruction slots used (8 texture, 98 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r3.xy, c7
    mad r1.x, r1.x, -c12.w, -r3.y
    mul r0.w, r0.w, r1.x
    mul r1.x, r2.x, r0.w
    add r2.xyz, -t0, c15
    nrm r4.xyz, r2
    dp3_sat r0.w, r0, r4
    dp3 r1.z, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mov r2.w, c15.w
    dp4 r1.w, r2, r2
    mad r1.w, r1.w, -c15.w, -r3.y
    mul r0.w, r0.w, r1.w
    mul r1.y, r1.z, r0.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.yz, r2.xxyw, t2.z
    min r2.xy, t2.w, r3.yzzw
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r4, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r3.yzw, r2.w, c0.xxyz, r0.w
    mul_pp r1.xyz, r1, r3.yzww
    add r3.yzw, -t0.xxyz, c8.xxyz
    dp3 r0.w, r3.yzww, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r3.yzww
    nrm r6.xyz, r3.yzww
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r6, t1, s7
    texld_pp r5, r5, s3
    log r7.x, r6.x
    log r7.y, r6.y
    log r7.z, r6.z
    mul r3.yzw, r7.xxyz, c5.z
    exp r6.x, r3.y
    exp r6.y, r3.z
    exp r6.z, r3.w
    mul_sat_pp r3.yzw, r6.xxyz, c5.w
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    texld_pp r4, t2, s1
    lrp_pp r3.yzw, r2.x, c23.y, r4.xxyz
    mul_pp r0.xyz, r0, r3.yzww
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r3.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, -c7.y, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c23.y, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov_pp r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c23.y, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r0.w, r2.xyww, r0
    mul r4.xyz, r0, r0.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, -c7.y, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 104 instruction slots used (8 texture, 96 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 3, -2
    def c23, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.xy, t6.zwzw
    texld r1, t6, s5
    texld r0, r0, s6
    mad r0.xy, r0, c7.x, c7.y
    mad r0.zw, r1.xyxy, c7.x, c7.y
    mul r0, r0, c6.yyxx
    mul r0.zw, r0, c6.z
    texld r1, t1, s4
    mul r2.w, r1.w, c7.z
    mov_sat r2.w, r2.w
    mul r0.zw, r0, r2.w
    mad r0.xy, r0, c6.w, -r0.zwzw
    mad_sat r2.xy, r1.w, c7.z, c7.ywzw
    mad r1.xyz, r1, c7.x, c7.y
    mad r0.xy, r2.x, r0, r0.zwzw
    mad r0.xy, r2.y, -r0, r0
    mov r0.z, c23.x
    mad r0.xyz, r1, c5.xxyw, r0
    mul r1.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r1.xyzz
    mad r0.xyz, t3, r0.z, r0.xyww
    add r1.xyz, -t0, c12
    nrm r2.xyz, r1
    dp3_sat r0.w, r0, r2
    dp3 r2.x, r2, -c13
    mov r2.w, c13.w
    mad_sat r2.x, r2.x, r2.w, c14.w
    mov r1.w, c12.w
    dp4 r1.x, r1, r1
    mov r1.y, c7.y
    mad r1.x, r1.x, -c12.w, -r1.y
    mul r0.w, r0.w, r1.x
    mul r2.x, r2.x, r0.w
    add r3.xyz, -t0, c15
    nrm r4.xyz, r3
    dp3_sat r0.w, r0, r4
    dp3 r1.x, r4, -c16
    mov r1.w, c16.w
    mad_sat r1.x, r1.x, r1.w, c17.w
    mov r3.w, c15.w
    dp4 r1.z, r3, r3
    mad r1.y, r1.z, -c15.w, -r1.y
    mul r0.w, r0.w, r1.y
    mul r2.y, r1.x, r0.w
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r1.xyz, r2.x, r1, c22
    mad_pp r1.xyz, r2.y, c17, r1
    dp3 r0.w, -c18, r0
    mul r1.w, r0.w, c9.z
    max r2.x, r0.w, r1.w
    dp3 r2.y, -c20, r0
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r0.w, -r2.w, -c7.y
    mad_pp r4.xyz, r2.w, c0, r0.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r0.w, r4, r0
    mul r5.xyz, r0, r0.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c23.y, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 105 instruction slots used (8 texture, 97 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.y
    mad_pp r1.xyz, r7.x, r1, c3.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, r3, -c2.y
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.y
    mad_pp r1.xyz, r7.x, r1, c3.z
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, -c2.y
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r4.xyz, r4, c3.y
    mad_pp r3.xyw, r3.x, r4.xyzz, c3.z
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r0.w, r1
    mov_pp oC0, r4

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, r8, -c2.y
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.y
    mad_pp r3.xyz, r7.x, r3, c3.z
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 136 instruction slots used (7 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, c3.y, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, -c2.y, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, c3.y, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, -c2.y
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c3.y, r4
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r0.w, r1
    mov_pp oC0, r4

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, -c2.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 134 instruction slots used (7 texture, 127 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, c3.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 135 instruction slots used (7 texture, 128 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov_pp r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mul_sat_pp r0.yzw, r6.xxyz, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r0.yzw, r0, r7.z
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    mad_pp r0.yzw, r8.xxyz, r1.xxyz, r0
    mul_pp r1.w, r8.w, c0.w
    dp3 r2.w, r5, r2
    mul r2.xyz, r2, r2.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    add r2.xyz, r3, c24.y
    mad_pp r2.xyz, r7.x, r2, c24.z
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, r3, -c23.y
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c24.y
    mad_pp r1.xyz, r7.x, r1, c24.z
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, -c23.y
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r4.xyz, r4, c24.y
    mad_pp r3.xyw, r3.x, r4.xyzz, c24.z
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, r8, -c23.y
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c24.y
    mad_pp r3.xyz, r7.x, r3, c24.z
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c23.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 142 instruction slots used (7 texture, 135 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mul_sat_pp r0.yzw, r6.xxyz, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r0.yzw, r0, r7.z
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    mad_pp r0.yzw, r8.xxyz, r1.xxyz, r0
    mul_pp r1.w, r8.w, c0.w
    dp3 r2.w, r5, r2
    mul r2.xyz, r2, r2.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    lrp_pp r2.xyz, r7.x, c24.y, r3
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, -c23.y, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r7.x, c24.y, r3
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r4, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, -c23.y
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c24.y, r4
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r6.w, r3.z
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, -c23.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 140 instruction slots used (7 texture, 133 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mul_sat_pp r1.xyz, r6, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r7, r7, s2
    mul_pp r1.xyz, r1, r7.z
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r7.x, c24.y, r8
    mul_pp r1.w, r6.w, r7.z
    dp3 r2.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c23.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 141 instruction slots used (7 texture, 134 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.y
    mad_pp r1.xyz, r7.x, r1, c3.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, r1, -c2.y
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.y
    mad_pp r1.xyz, r7.x, r1, c3.z
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c3.y
    mad_pp r4.xyz, r7.x, r4, c3.z
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, r4, -c2.y
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c3.y
    mad_pp r4.xyz, r7.x, r4, c3.z
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r4, c2.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 146 instruction slots used (8 texture, 138 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, c3.y, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, -c2.y, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, c3.y, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, c3.y, r4
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, -c2.y, r4
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 144 instruction slots used (8 texture, 136 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 3, -2
    def c3, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c2.x, c2.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c2.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c2.z, c2.xyyw
    mad r3.xyz, r3, c2.x, c2.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c3.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c3.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c3.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c1, r2
    add_pp r1.w, -r7.w, -c2.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, c3.y, r4
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r4.xyz, r0, r1.w, r1
    mov_pp oC0, r4

// approximately 145 instruction slots used (8 texture, 137 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov_pp r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r0.yzw, r0, r6.xxyz
    mul_pp r0.yzw, r7.z, r0
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    dp3 r1.w, r5, r2
    mul r2.xyz, r2, r1.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.yzw, r3.xxyz, r1.xxyz, r0
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c24.y
    mad_pp r2.xyz, r7.x, r2, c24.z
    mul_pp r0.yzw, r0, r2.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, r1, -c23.y
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.y
    mad_pp r1.xyz, r7.x, r1, c24.z
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c24.y
    mad_pp r4.xyz, r7.x, r4, c24.z
    mul_pp r3.xyz, r3, r4
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, r4, -c23.y
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r4.xyz, r4, c24.y
    mad_pp r4.xyz, r7.x, r4, c24.z
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r4, c23.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 152 instruction slots used (8 texture, 144 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xy, c23
    mad r1.w, r0.w, -c12.w, -r0.y
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.zw, r2.xyxy, c23.x, c23.y
    mul r0.zw, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r2.z, r3.w, c23.z
    mov_sat r2.z, r2.z
    mul r2.xy, r2, r2.z
    mad r0.zw, r0, c6.w, -r2.xyxy
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.zw, r2.z, r0, r2.xyxy
    mad r2.xy, r2.w, -r0.zwzw, r0.zwzw
    mov r2.z, c24.x
    mad r2.xyz, r3, c5.xxyw, r2
    mul r3.xyz, r2.y, t4
    mad r2.xyw, t5.xyzz, r2.x, r3.xyzz
    mad r2.xyz, t3, r2.z, r2.xyww
    dp3_sat r2.w, r2, r1
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r1, -c13
    mov r3, c14
    mad_sat r2.w, r2.w, c13.w, r3.w
    mul r4.x, r1.w, r2.w
    mov r5.w, c15.w
    add r5.xyz, -t0, c15
    dp4 r1.w, r5, r5
    nrm r6.xyz, r5
    mad r1.w, r1.w, -c15.w, -r0.y
    dp3_sat r2.w, r2, r6
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r6, -c16
    mov r3.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r2
    add r1.w, r1.w, r1.w
    mad r0.yzw, r2.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c24.x
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r2
    add r1.w, r1.w, r1.w
    mad r1.xyz, r2, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, -c18, r2
    mul r3.w, r2.w, c9.z
    max r1.x, r2.w, r3.w
    dp3 r1.y, -c20, r2
    max r4.zw, r1.xyxy, t2.z
    min r1.xy, t2.w, r4.zwzw
    dp3 r2.w, c18, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c18
    dp3 r2.w, r7, r6
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c19
    mad_pp r0.yzw, r7.xxyz, r1.x, r0
    dp3 r2.w, c20, r2
    add r2.w, r2.w, r2.w
    mad r7.xyz, r2, -r2.w, c20
    dp3 r2.w, r7, r6
    dp3 r3.w, r2, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r2.w, c24.x
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r7.xyz, r2.w, c21
    mad_pp r0.yzw, r7.xxyz, r1.y, r0
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r0.yzw, r0, r6.xxyz
    mul_pp r0.yzw, r7.z, r0
    mad_pp r3.xyz, r4.x, r3, c22
    mad_pp r3.xyz, r4.y, c17, r3
    mad_pp r1.xzw, r1.x, c19.xyyz, r3.xyyz
    mad_pp r1.xyz, r1.y, c21, r1.xzww
    mad_pp r1.xyz, r7.y, c4, r1
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r1.xyz, r1, r3
    dp3 r1.w, r5, r2
    mul r2.xyz, r2, r1.w
    mad_pp r2.xyz, r2, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.yzw, r3.xxyz, r1.xxyz, r0
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r6, r2
    mul_pp r2.w, r6.w, r7.z
    mad_pp r0.yzw, r2.xxyz, r2.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r7.x, c24.y, r2
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r2.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, -c23.y, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r6, r0
    mul_pp r0.w, r6.w, r7.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r7.x, c24.y, r1
    mad_pp r0.xyz, r3, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, c24.y, r4
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r7.z, r2
    mul_pp r1.w, r6.w, r7.z
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, -c23.y, r4
    mul_pp r1.w, r6.w, r7.z
    mul_pp r3.xyz, r3, r8
    mul_pp r4.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 150 instruction slots used (8 texture, 142 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogBaseNormDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, true, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 3, -2
    def c24, 0, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s4
    dcl_2d s5
    dcl_2d s6
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c23.y
    mad r0.x, r0.w, -c12.w, -r1.w
    mov r2.xy, t6.zwzw
    texld r3, t6, s5
    texld r2, r2, s6
    mad r0.yz, r2.xxyw, c23.x, c23.y
    mul r0.yz, r0, c6.y
    mad r2.xy, r3, c23.x, c23.y
    mul r2.xy, r2, c6.x
    mul r2.xy, r2, c6.z
    texld r3, t1, s4
    mul r0.w, r3.w, c23.z
    mov_sat r0.w, r0.w
    mul r2.xy, r2, r0.w
    mad r0.yz, r0, c6.w, -r2.xxyw
    mad_sat r2.zw, r3.w, c23.z, c23.xyyw
    mad r3.xyz, r3, c23.x, c23.y
    mad r0.yz, r2.z, r0, r2.xxyw
    mad r2.xy, r2.w, -r0.yzzw, r0.yzzw
    mov_pp r2.z, c24.x
    mad r0.yzw, r3.xxyz, c5.xxxy, r2.xxyz
    mul r2.xyz, r0.z, t4
    mad r2.xyz, t5, r0.y, r2
    mad r0.yzw, t3.xxyz, r0.w, r2.xxyz
    dp3_sat r2.x, r0.yzww, r1
    mul r0.x, r0.x, r2.x
    dp3 r2.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r2.x, c13.w, r3.w
    mul r2.x, r0.x, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r3.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r3.w, -c15.w, -r1.w
    dp3_sat r3.w, r0.yzww, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r2.y, r1.w, r3.w
    max r4.xy, r2, t2.z
    min r2.xy, t2.w, r4
    dp3 r1.w, -r5, r0.yzww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.yzww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r2.y, r4
    dp3 r1.w, -r1, r0.yzww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.yzww, -r1.w, -r1
    dp3 r3.w, r1, r6
    max r4.w, r3.w, c24.x
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r2.x, r4
    dp3 r1.w, -c18, r0.yzww
    mul r3.w, r1.w, c9.z
    max r4.x, r1.w, r3.w
    dp3 r4.y, -c20, r0.yzww
    max r2.zw, r4.xyxy, t2.z
    min r4.xy, t2.w, r2.zwzw
    dp3 r1.w, c18, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c18
    dp3 r1.w, r7, r6
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c19
    mad_pp r1.xyz, r7, r4.x, r1
    dp3 r1.w, c20, r0.yzww
    add r1.w, r1.w, r1.w
    mad r7.xyz, r0.yzww, -r1.w, c20
    dp3 r1.w, r7, r6
    dp3 r3.w, r0.yzww, r6
    mov r6, c10
    mad_pp r6, r3.w, r6, c11
    max r3.w, r1.w, c24.x
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r7.xyz, r1.w, c21
    mad_pp r1.xyz, r7, r4.y, r1
    mov r7.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r7, r7, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r6.xyz, r6, r8
    mul_sat_pp r1.xyz, r1, r6
    mul_pp r1.xyz, r7.z, r1
    mad_pp r2.xzw, r2.x, r3.xyyz, c22.xyyz
    mad_pp r2.xyz, r2.y, c17, r2.xzww
    mad_pp r2.xyz, r4.x, c19, r2
    mad_pp r2.xyz, r4.y, c21, r2
    mad_pp r2.xyz, r7.y, c4, r2
    add_pp r1.w, -r7.w, -c23.y
    mad_pp r3.xyz, r7.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r8.xyz, r7.x, c24.y, r4
    mul_pp r1.w, r6.w, r7.z
    mad_pp r3.xyz, r8, c23.x, r3
    mul_pp r4.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r5.w, r5, r0.yzww
    mul r0.xyz, r0.yzww, r5.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r6, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 151 instruction slots used (8 texture, 143 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c2.w
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c2.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c2.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 74 instruction slots used (5 texture, 69 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c2.w, r4
    mad_pp r2.xyz, r5, c2.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 75 instruction slots used (5 texture, 70 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c5.z
    mad_pp r5.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r5.xxyz
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, r2, -c5.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    add r2.yzw, r3.xxyz, c5.y
    mad_pp r2.xyz, r2.x, r2.yzww, c5.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, r3, -c5.w
    mad_pp r0.xyz, r4, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c5.w
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    add r2.yzw, r4.xxyz, c5.y
    mad_pp r2.xyz, r2.x, r2.yzww, c5.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, r4, -c5.w
    mad_pp r2.xyz, r5, c5.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c5.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c5
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r2.w, r3, r2
    mul r4.xyz, r2, r2.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r1, r1, s2
    texld_pp r4, r4, s3
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c5.z
    mad_pp r5.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r5.xxyz
    nrm r5.xyz, r3
    dp3 r4.w, r2, r5
    mov r2, c10
    mad_pp r2, r4.w, r2, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.w, r2.xxyz
    texld_pp r2, t2, s1
    texld_pp r3, t1, s0
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r3.w, r3.w, c0.w
    lrp_pp r4.xyz, r1.x, c5.w, r2
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c5.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t2, s1
    texld_pp r4, t1, s0
    mad_pp r0.xyz, r4, r1, r0
    mul_pp r1.w, r4.w, c0.w
    lrp_pp r4.xyz, r2.x, c5.w, r3
    mad_pp r0.xyz, r4, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c5.w, r3
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r3.xyz, r0.yzww, r1.w
    mad_pp r3.xyz, r3, c8.w, -r2.xyww
    texld_pp r5, t1, s0
    texld_pp r3, r3, s3
    mul_pp r4.xyz, r4, r5
    mul_pp r5.w, r5.w, c0.w
    mul_pp r1.xyz, r1, r4
    add_pp r1.xyz, r1, r1
    nrm r4.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r4
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r3
    mul_pp r0.w, r0.w, r2.z
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c5.z, r4
    mul_pp r2.xyz, r3, r5
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 80 instruction slots used (5 texture, 75 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNorm
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, true, false, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c5.x, c5.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    add r3.xyz, -t0, c8
    dp3 r1.w, r3, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r3
    texld_pp r2, r2, s2
    texld_pp r4, r4, s3
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c5.z
    mad_pp r5.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r5
    nrm r5.xyz, r3
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0.w, r0
    texld_pp r3, t1, s0
    texld_pp r4, t2, s1
    lrp_pp r5.xyz, r2.x, c5.w, r4
    mad_pp r2.xyz, r5, c5.x, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c5.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 81 instruction slots used (5 texture, 76 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c2.y
    mad_pp r2.xyz, r2.x, r2.yzww, c2.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c2.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mul_pp r0.xyz, r0, r4
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.z, r3
    mul_pp r1.xyz, r0, r4
    mov_pp oC0, r1

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c2.w, r3
    mad_pp r0.xyz, r4, c2.x, r0
    add_pp r1.xyz, r0, c2.y
    mov_pp oC0, r1

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c2.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r3.xyz, r0, r0.w, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c2.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 84 instruction slots used (6 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c2.x, c2.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c1, r1
    add_pp r1.w, -r2.w, c2.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c2.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c2.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c2.y
    mad_pp r3.xyz, r2, r1, r0
    mov_pp oC0, r3

// approximately 85 instruction slots used (6 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c7
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c7.x, c7.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c7.z
    mad_pp r4.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r4.xxyz
    add r4.xyz, -t0, c8
    dp3 r2.w, r4, r2
    mul r5.xyz, r2, r2.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r5.w, r2, r6
    mov r2, c10
    mad_pp r2, r5.w, r2, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.xxyz, r5.xxyz
    mul_pp r1.yzw, r2.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, r3, -c7.w
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    add r2.yzw, r3.xxyz, c7.y
    mad_pp r2.xyz, r2.x, r2.yzww, c7.z
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, r3, -c7.w
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, r3, -c7.w
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    add r2.yzw, r3.xxyz, c7.y
    mad_pp r2.xyz, r2.x, r2.yzww, c7.z
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, -0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, r3, -c7.w
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c7
    mad r1.w, r0.w, -c12.w, r0.z
    texld r2, t6, s5
    mad r0.yw, r2.xxzy, c7.x, c7.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r2.xyz, r0.w, t4
    mad r2.xyz, t5, r0.y, r2
    add r2.xyz, r2, t3
    dp3_sat r2.w, r2, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.w, r1.w, r2.w
    mul r1.x, r0.y, r0.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r4.w, r2, r4
    dp3 r0.y, r4, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r2.w, r2.w, r4.w
    mul r1.y, r0.y, r2.w
    max r0.yz, r1.xxyw, t2.z
    min r1.xy, t2.w, r0.yzzw
    mov r3.xyz, c14
    mad_pp r0.yzw, r1.x, r3.xxyz, c22.xxyz
    mad_pp r0.yzw, r1.y, c17.xxyz, r0
    dp3 r2.w, -c18, r2
    mul r1.x, r2.w, c9.z
    max r3.x, r2.w, r1.x
    dp3 r3.y, -c20, r2
    max r1.xy, r3, t2.z
    min r3.xy, t2.w, r1
    mad_pp r0.yzw, r3.x, c19.xxyz, r0
    mad_pp r0.yzw, r3.y, c21.xxyz, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r1, r1, s2
    mad_pp r0.yzw, r1.y, c4.xxyz, r0
    add_pp r2.w, -r1.w, c7.z
    mad_pp r4.xyz, r1.w, c0, r2.w
    mul_pp r0.yzw, r0, r4.xxyz
    add r4.xyz, -t0, c8
    dp3 r2.w, r4, r2
    mul r5.xyz, r2, r2.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r5.w, r2, r6
    mov r2, c10
    mad_pp r2, r5.w, r2, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r2.w
    mul_pp r1.yzw, r2.xxyz, r5.xxyz
    mul_pp r1.yzw, r2.w, r1
    mad_pp r0.yzw, r3.xxyz, r0, r1
    mul_pp r2.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c7.w, r3
    mul_pp r0.yzw, r0, r4.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c7.z, r3
    mul_pp r0.xyz, r0, r4
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t1, s0
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    mad_pp r0.xyz, r3, r1, r0
    mul_pp r1.w, r3.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r2.x, c7.w, r3
    mad_pp r0.xyz, r4, c7.x, r0
    add_pp r0.xyz, r0, c7.y
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    lrp_pp r4.xyz, r2.x, c7.w, r3
    texld_pp r3, t1, s0
    mul_pp r2.xyw, r4.xyzz, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r1.xyz, r1, r2.xyww
    add_pp r1.xyz, r1, r1
    add r2.xyw, -t0.xyzz, c8.xyzz
    dp3 r1.w, r2.xyww, r0.yzww
    mul r4.xyz, r0.yzww, r1.w
    mad_pp r4.xyz, r4, c8.w, -r2.xyww
    nrm r5.xyz, r2.xyww
    dp3 r1.w, r0.yzww, r5
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r5, t1, s7
    texld_pp r4, r4, s3
    log r6.x, r5.x
    log r6.y, r5.y
    log r6.z, r5.z
    mul r2.xyw, r6.xyzz, c5.z
    exp r5.x, r2.x
    exp r5.y, r2.y
    exp r5.z, r2.w
    mul_sat_pp r2.xyw, r5.xyzz, c5.w
    mul_pp r0.xyz, r0, r2.xyww
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r4
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c7.z, r3
    texld_pp r2, t1, s0
    mul_pp r2.xyz, r4, r2
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 90 instruction slots used (6 texture, 84 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, true, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c7, 2, -1, 1, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c7.z
    mad r0.x, r0.w, -c12.w, r1.w
    texld r2, t6, s5
    mad r0.yz, r2.xxyw, c7.x, c7.y
    mul r0.yz, r0, c6.x
    mul r0.yz, r0, c6.z
    mul r2.xyz, r0.z, t4
    mad r0.yzw, t5.xxyz, r0.y, r2.xxyz
    add r0.yzw, r0, t3.xxyz
    dp3_sat r2.x, r0.yzww, r1
    dp3 r1.x, r1, -c13
    mov r2.w, c13.w
    mad_sat r1.x, r1.x, r2.w, c14.w
    mul r0.x, r0.x, r2.x
    mul r1.x, r1.x, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r1.w
    dp3_sat r0.x, r0.yzww, r3
    dp3 r1.z, r3, -c16
    mov r1.w, c16.w
    mad_sat r1.z, r1.z, r1.w, c17.w
    mul r1.w, r0.x, r3.w
    mul r1.y, r1.z, r1.w
    max r2.xy, r1, t2.z
    min r1.xy, t2.w, r2
    mov r2.xyz, c14
    mad_pp r1.xzw, r1.x, r2.xyyz, c22.xyyz
    mad_pp r1.xyz, r1.y, c17, r1.xzww
    dp3 r1.w, -c18, r0.yzww
    mul r0.x, r1.w, c9.z
    max r2.x, r1.w, r0.x
    dp3 r2.y, -c20, r0.yzww
    max r3.xy, r2, t2.z
    min r2.xy, t2.w, r3
    mad_pp r1.xyz, r2.x, c19, r1
    mad_pp r1.xyz, r2.y, c21, r1
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r1.xyz, r2.y, c4, r1
    add_pp r1.w, -r2.w, c7.z
    mad_pp r4.xyz, r2.w, c0, r1.w
    mul_pp r1.xyz, r1, r4
    add r4.xyz, -t0, c8
    dp3 r1.w, r4, r0.yzww
    mul r5.xyz, r0.yzww, r1.w
    mad_pp r5.xyz, r5, c8.w, -r4
    nrm r6.xyz, r4
    dp3 r1.w, r0.yzww, r6
    mov r0, c10
    mad_pp r0, r1.w, r0, c11
    texld_pp r4, t1, s7
    texld_pp r5, r5, s3
    log r6.x, r4.x
    log r6.y, r4.y
    log r6.z, r4.z
    mul r4.xyz, r6, c5.z
    exp r6.x, r4.x
    exp r6.y, r4.y
    exp r6.z, r4.z
    mul_sat_pp r4.xyz, r6, c5.w
    mul_pp r0.xyz, r0, r4
    mul_pp r0.w, r0.w, r2.z
    mul_pp r0.xyz, r0, r5
    mul_pp r0.xyz, r0.w, r0
    lrp_pp r4.xyz, r2.x, c7.w, r3
    texld_pp r2, t1, s0
    mad_pp r2.xyz, r4, c7.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, c7.y
    mad_pp r0.xyz, r2, r1, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 91 instruction slots used (6 texture, 85 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c2.y
    mad_pp r1.xyz, r6.x, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r6.xyz, r6, c3.x
    mad_pp r3.xyw, r3.x, r6.xyzz, c3.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c2.y
    mad_pp r3.xyz, r6.x, r3, c2.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c3.x
    mad_pp r3.xyz, r6.x, r3, c3.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 121 instruction slots used (5 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c3.x, r3
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c2.z, r3
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c3.x, r3
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c1, r2
    add_pp r1.w, -r3.w, c2.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c3.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r0.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c2.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 119 instruction slots used (5 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c3.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c2.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r5.xyz, r0, r1.w, r1
    mov_pp oC0, r5

// approximately 120 instruction slots used (5 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c5
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c5.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    add r1.xyz, r4, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c5.y
    mad_pp r1.xyz, r6.x, r1, c5.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    add r1.xyz, r3, c23.x
    mad_pp r1.xyz, r6.x, r1, c23.y
    mad_pp r0.xyz, r1, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c5.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    add r6.xyz, r6, c23.x
    mad_pp r3.xyw, r3.x, r6.xyzz, c23.y
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r3, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c5.y
    mad_pp r3.xyz, r6.x, r3, c5.z
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    add r3.xyz, r8, c23.x
    mad_pp r3.xyz, r6.x, r3, c23.y
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c5.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c5.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 127 instruction slots used (5 texture, 122 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c5
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c5.x, c5.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c5.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mul_sat_pp r0.yzw, r1.xxyz, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r0.yzw, r0, r6.z
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c5.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    mad_pp r0.yzw, r8.xxyz, r2.xxyz, r0
    mul_pp r2.w, r8.w, c0.w
    dp3 r3.w, r5, r3
    mul r3.xyz, r3, r3.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    lrp_pp r1.xyz, r6.x, c23.x, r4
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c5.z, r3
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    mad_pp r1.xyz, r8, r2, r1
    mul_pp r2.w, r8.w, c0.w
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t2, s1
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    lrp_pp r1.xyz, r6.x, c23.x, r3
    mad_pp r0.xyz, r1, c5.x, r0
    add_pp r0.xyz, r0, c5.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mov r3.xy, t1.zwzw
    texld_pp r6, t2, s1
    texld_pp r3, r3, s2
    mad_pp r2.xyz, r3.y, c4, r2
    add_pp r1.w, -r3.w, c5.z
    mad_pp r7.xyz, r3.w, c0, r1.w
    mul_pp r2.xyz, r2, r7
    lrp_pp r7.xyz, r3.x, c23.x, r6
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyw, r7.xyzz, r5.xyzz
    mul_pp r5.w, r5.w, c0.w
    mul_pp r2.xyz, r2, r3.xyww
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r3.z, r2
    mul_pp r0.w, r4.w, r3.z
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r0.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c5.z, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mul_pp r3.xyz, r3, r5
    mul_pp r5.w, r5.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 125 instruction slots used (5 texture, 120 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, true, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 2, -1, 1, 0
    def c23, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c5.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c5.x, c5.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c5.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c5.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mul_sat_pp r1.xyz, r4, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c5.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    lrp_pp r3.xyz, r6.x, c23.x, r8
    mul_pp r1.w, r4.w, r6.z
    dp3 r2.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r2.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r5, t1, s0
    texld_pp r0, r0, s3
    mad_pp r3.xyz, r3, c5.x, r5
    mul_pp r5.w, r5.w, c0.w
    add_pp r3.xyz, r3, c5.y
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r5.xyz, r0, r1
    mov_pp oC0, r5

// approximately 126 instruction slots used (5 texture, 121 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c2.y
    mad_pp r1.xyz, r6.x, r1, c2.z
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c3.x
    mad_pp r1.xyz, r6.x, r1, c3.y
    mad_pp r0.xyz, r1, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c3.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c3.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c2.y
    mad_pp r6.xyw, r6.x, r7.xyzz, c2.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c3.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c3.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 131 instruction slots used (6 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c3.x, r1
    mul_pp r0.xyz, r0, r3
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c2.z, r1
    mul_pp r2.xyz, r0, r3
    mov_pp oC0, r2

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c3.x, r1
    mad_pp r0.xyz, r3, c2.x, r0
    add_pp r2.xyz, r0, c2.y
    mov_pp oC0, r2

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c3.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r7.xyz, r0, r1.w, r1
    mov_pp oC0, r7

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c2.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 129 instruction slots used (6 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 2, -1, 1, 0
    def c3, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c2.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c2.x, c2.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c2.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c2.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c1, r2
    add_pp r1.w, -r6.w, c2.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c3.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c2.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c2.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r6.xyz, r0, r1.w, r1
    mov_pp oC0, r6

// approximately 130 instruction slots used (6 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c23
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c23.x, c23.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c23.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.x
    mad_pp r1.xyz, r6.x, r1, c24.y
    mul_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c23.y
    mad_pp r1.xyz, r6.x, r1, c23.z
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    add r1.xyz, r1, c24.x
    mad_pp r1.xyz, r6.x, r1, c24.y
    mad_pp r0.xyz, r1, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c24.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c24.y
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c23.y
    mad_pp r6.xyw, r6.x, r7.xyzz, c23.z
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r6.xyww
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, -0.5, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    add r7.xyz, r7, c24.x
    mad_pp r6.xyw, r6.x, r7.xyzz, c24.y
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r6.xyww, c23.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 137 instruction slots used (6 texture, 131 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.xz, c23
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.yw, r3.xxzy, c23.x, c23.y
    mul r0.yw, r0, c6.x
    mul r0.yw, r0, c6.z
    mul r3.xyz, r0.w, t4
    mad r3.xyz, t5, r0.y, r3
    add r3.xyz, r3, t3
    dp3_sat r3.w, r3, r1
    mul r2.w, r2.w, r3.w
    mul r4.x, r1.w, r2.w
    add r5.xyz, -t0, c15
    nrm r6.xyz, r5
    dp3 r1.w, r6, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r5.w, c15.w
    dp4 r2.w, r5, r5
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r3.w, r3, r6
    mul r2.w, r2.w, r3.w
    mul r4.y, r1.w, r2.w
    max r0.yz, r4.xxyw, t2.z
    min r4.xy, t2.w, r0.yzzw
    dp3 r1.w, -r6, r3
    add r1.w, r1.w, r1.w
    mad r0.yzw, r3.xxyz, -r1.w, -r6.xxyz
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r0.yzww, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r0.yzw, r1.w, c17.xxyz
    mul r0.yzw, r4.y, r0
    dp3 r1.w, -r1, r3
    add r1.w, r1.w, r1.w
    mad r1.xyz, r3, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r0.yzw, r1.xxyz, r4.x, r0
    dp3 r2.w, c18, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c18
    dp3 r2.w, r1, r6
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c19
    dp3 r1.w, -c18, r3
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r3
    max r4.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r4.zwzw
    mad_pp r0.yzw, r1.xxyz, r7.x, r0
    dp3 r2.w, c20, r3
    add r2.w, r2.w, r2.w
    mad r1.xyz, r3, -r2.w, c20
    dp3 r2.w, r1, r6
    dp3 r3.w, r3, r6
    mov r1, c10
    mad_pp r1, r3.w, r1, c11
    max r3.w, r2.w, c23.w
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r6.xyz, r2.w, c21
    mad_pp r0.yzw, r6.xxyz, r7.y, r0
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r1.xyz, r1, r8
    mul_sat_pp r0.yzw, r0, r1.xxyz
    mul_pp r0.yzw, r6.z, r0
    mad_pp r2.xyz, r4.x, r2, c22
    mad_pp r2.xyz, r4.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r2.w, -r6.w, c23.z
    mad_pp r4.xyz, r6.w, c0, r2.w
    mul_pp r2.xyz, r2, r4
    dp3 r2.w, r5, r3
    mul r3.xyz, r3, r2.w
    mad_pp r3.xyz, r3, c8.w, -r5
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r0.yzw, r4.xxyz, r2.xxyz, r0
    mul_pp r2.w, r4.w, c0.w
    mul_pp r1.xyz, r1, r3
    mul_pp r1.w, r1.w, r6.z
    mad_pp r0.yzw, r1.xxyz, r1.w, r0
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c24.x, r1
    mul_pp r0.yzw, r0, r3.xxyz
    mul_pp r0.yzw, r0, c1.w
    add r1.xyz, r0.yzww, r0.yzww
    mad r0.xyz, r0.yzww, -r0.x, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c23.z, r1
    mul_pp r0.xyz, r0, r3
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    dp3 r1.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r1.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r3, t1, s0
    texld_pp r0, r0, s3
    mad_pp r1.xyz, r3, r2, r1
    mul_pp r2.w, r3.w, c0.w
    mul_pp r0.xyz, r4, r0
    mul_pp r0.w, r4.w, r6.z
    mad_pp r0.xyz, r0, r0.w, r1
    texld_pp r1, t2, s1
    lrp_pp r3.xyz, r6.x, c24.x, r1
    mad_pp r0.xyz, r3, c23.x, r0
    add_pp r0.xyz, r0, c23.y
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c24.x, r7
    mul_pp r3.xyz, r3, r8
    mul_pp r7.w, r3.w, c0.w
    mul_pp r2.xyz, r2, r3
    add_pp r2.xyz, r2, r2
    mad_pp r1.xyz, r1, r6.z, r2
    mul_pp r1.w, r4.w, r6.z
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r7.xyz, r0, r1
    mov_pp oC0, r7

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c23.z, r7
    mul_pp r1.w, r4.w, r6.z
    mul_pp r3.xyz, r3, r8
    mul_pp r6.w, r3.w, c0.w
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 135 instruction slots used (6 texture, 129 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogDetailNormSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, true, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c23, 2, -1, 1, 0
    def c24, 0.5, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl t4.xyz
    dcl t5.xyz
    dcl t6.xy
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s5
    dcl_2d s7
    add r0.xyz, -t0, c12
    nrm r1.xyz, r0
    dp3 r1.w, r1, -c13
    mov r2, c14
    mad_sat r1.w, r1.w, c13.w, r2.w
    mov r0.w, c12.w
    dp4 r2.w, r0, r0
    mov r0.z, c23.z
    mad r2.w, r2.w, -c12.w, r0.z
    texld r3, t6, s5
    mad r0.xy, r3, c23.x, c23.y
    mul r0.xy, r0, c6.x
    mul r0.xy, r0, c6.z
    mul r3.xyz, r0.y, t4
    mad r0.xyw, t5.xyzz, r0.x, r3.xyzz
    add r0.xyw, r0, t3.xyzz
    dp3_sat r3.x, r0.xyww, r1
    mul r2.w, r2.w, r3.x
    mul r3.x, r1.w, r2.w
    add r4.xyz, -t0, c15
    nrm r5.xyz, r4
    dp3 r1.w, r5, -c16
    mov r2.w, c17.w
    mad_sat r1.w, r1.w, c16.w, r2.w
    mov r4.w, c15.w
    dp4 r2.w, r4, r4
    mad r2.w, r2.w, -c15.w, r0.z
    dp3_sat r5.w, r0.xyww, r5
    mul r2.w, r2.w, r5.w
    mul r3.y, r1.w, r2.w
    max r4.xy, r3, t2.z
    min r3.xy, t2.w, r4
    dp3 r1.w, -r5, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, -r5
    add r5.xyz, -t0, c8
    nrm r6.xyz, r5
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c17
    mul r4.xyz, r3.y, r4
    dp3 r1.w, -r1, r0.xyww
    add r1.w, r1.w, r1.w
    mad r1.xyz, r0.xyww, -r1.w, -r1
    dp3 r2.w, r1, r6
    max r4.w, r2.w, c23.w
    pow r2.w, r4.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r3.x, r4
    dp3 r1.w, c18, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c18
    dp3 r1.w, r4, r6
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r4.xyz, r1.w, c19
    dp3 r1.w, -c18, r0.xyww
    mul r2.w, r1.w, c9.z
    max r7.x, r1.w, r2.w
    dp3 r7.y, -c20, r0.xyww
    max r3.zw, r7.xyxy, t2.z
    min r7.xy, t2.w, r3.zwzw
    mad_pp r1.xyz, r4, r7.x, r1
    dp3 r1.w, c20, r0.xyww
    add r1.w, r1.w, r1.w
    mad r4.xyz, r0.xyww, -r1.w, c20
    dp3 r1.w, r4, r6
    dp3 r2.w, r0.xyww, r6
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    max r2.w, r1.w, c23.w
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r7.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r8, t1, s7
    texld_pp r6, r6, s2
    log r9.x, r8.x
    log r9.y, r8.y
    log r9.z, r8.z
    mul r8.xyz, r9, c5.z
    exp r9.x, r8.x
    exp r9.y, r8.y
    exp r9.z, r8.z
    mul_sat_pp r8.xyz, r9, c5.w
    mul_pp r4.xyz, r4, r8
    mul_sat_pp r1.xyz, r1, r4
    mul_pp r1.xyz, r6.z, r1
    mad_pp r2.xyz, r3.x, r2, c22
    mad_pp r2.xyz, r3.y, c17, r2
    mad_pp r2.xyz, r7.x, c19, r2
    mad_pp r2.xyz, r7.y, c21, r2
    mad_pp r2.xyz, r6.y, c4, r2
    add_pp r1.w, -r6.w, c23.z
    mad_pp r3.xyz, r6.w, c0, r1.w
    mul_pp r2.xyz, r2, r3
    texld_pp r3, t1, s0
    texld_pp r7, t2, s1
    lrp_pp r8.xyz, r6.x, c24.x, r7
    mul_pp r1.w, r4.w, r6.z
    mad_pp r3.xyz, r8, c23.x, r3
    mul_pp r6.w, r3.w, c0.w
    add_pp r3.xyz, r3, c23.y
    mad_pp r1.xyz, r3, r2, r1
    dp3 r4.w, r5, r0.xyww
    mul r0.xyz, r0.xyww, r4.w
    mad_pp r0.xyz, r0, c8.w, -r5
    texld_pp r0, r0, s3
    mul_pp r0.xyz, r4, r0
    mad_pp r0.xyz, r0, r1.w, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r6.xyz, r0, r1
    mov_pp oC0, r6

// approximately 136 instruction slots used (6 texture, 130 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    add r1.yzw, r3.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.z
    mul_pp r0.xyz, r0, r1
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    add r1.yzw, r3.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.x
    mul_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    add r1.yzw, r3.xxyz, c2.y
    mad_pp r1.xyz, r1.x, r1.yzww, c2.z
    mad_pp r0.xyz, r1, c2.w, r0
    add_pp r2.xyz, r0, -c2.x
    mov_pp oC0, r2

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    add r2.xyz, r2, c2.y
    mad_pp r1.xyw, r1.x, r2.xyzz, c2.z
    texld_pp r2, t1, s7
    texld_pp r3, t1, s0
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    add r2.xyz, r4, c2.y
    mad_pp r2.xyz, r1.x, r2, c2.x
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    add r2.xyz, r4, c2.y
    mad_pp r2.xyz, r1.x, r2, c2.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.w, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 79 instruction slots used (5 texture, 74 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.y, r3
    mul_pp r0.xyz, r0, r4
    add_pp r2.xyz, r0, r0
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.x, r3
    mul_pp r2.xyz, r0, r4
    mov_pp oC0, r2

// approximately 77 instruction slots used (5 texture, 72 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c2.y, r3
    mad_pp r0.xyz, r4, c2.z, r0
    add_pp r2.xyz, r0, c2.w
    mov_pp oC0, r2

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    lrp_pp r3.xyz, r1.x, c2.y, r2
    texld_pp r2, t1, s7
    texld_pp r4, t1, s0
    mul_pp r1.xyw, r3.xyzz, r4.xyzz
    mul_pp r3.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplySpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    lrp_pp r2.xyz, r1.x, c2.x, r4
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 77 instruction slots used (5 texture, 72 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c1, r0
    add_pp r0.w, -r1.w, c2.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    lrp_pp r2.xyz, r1.x, c2.y, r4
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c2.z, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c2.w
    mad_pp r3.xyz, r2, r0, r1.yzww
    mov_pp oC0, r3

// approximately 78 instruction slots used (5 texture, 73 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c6
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    dp3 r0.y, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.y, r0.y, r0.w, c14.w
    mul r0.x, r0.x, r1.w
    mul r0.x, r0.y, r0.x
    mov r1.w, c15.w
    add r1.xyz, -t0, c15
    dp4 r1.w, r1, r1
    nrm r3.xyz, r1
    mad r3.w, r1.w, -c15.w, r2.x
    dp3_sat r0.z, t3, r3
    dp3 r0.w, r3, -c16
    mov r1.w, c16.w
    mad_sat r0.w, r0.w, r1.w, c17.w
    mul r0.z, r0.z, r3.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r3, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r2.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    log r2.x, r3.x
    log r2.y, r3.y
    log r2.z, r3.z
    mul r2.xyz, r2, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r3.w, r3, t3
    mul r1.yzw, r3.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r3.w, r4.w, c0.w
    texld_pp r4, t2, s1
    add r1.yzw, r4.xxyz, c6.y
    mad_pp r1.xyz, r1.x, r1.yzww, c6.z
    mul_pp r0.xyz, r0, r1
    mul_pp r0.xyz, r0, c1.w
    add r1.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    add r1.yzw, r3.xxyz, c6.y
    mad_pp r1.xyz, r1.x, r1.yzww, c6.x
    mul_pp r0.xyz, r0, r1
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    add r1.yzw, r3.xxyz, c6.y
    mad_pp r1.xyz, r1.x, r1.yzww, c6.z
    mad_pp r0.xyz, r1, c6.w, r0
    add_pp r0.xyz, r0, -c6.x
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    add r2.xyz, r2, c6.y
    mad_pp r1.xyw, r1.x, r2.xyzz, c6.z
    texld_pp r2, t1, s7
    texld_pp r3, t1, s0
    mul_pp r1.xyw, r1, r3.xyzz
    mul_pp r3.w, r3.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -1, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    add r2.xyz, r4, c6.y
    mad_pp r2.xyz, r1.x, r2, c6.x
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, -0.5, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    add r2.xyz, r4, c6.y
    mad_pp r2.xyz, r1.x, r2, c6.z
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c6.w, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 85 instruction slots used (5 texture, 80 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r0.xz, c6
    mad r1.w, r0.w, -c12.w, r0.x
    dp3_sat r0.y, t3, r1
    dp3 r0.w, r1, -c13
    mov r2.w, c13.w
    mad_sat r0.w, r0.w, r2.w, c14.w
    mul r0.y, r0.y, r1.w
    mul r1.x, r0.w, r0.y
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r3.xyz, r2
    mad r3.w, r2.w, -c15.w, r0.x
    dp3_sat r0.x, t3, r3
    dp3 r0.y, r3, -c16
    mov r0.w, c16.w
    mad_sat r0.y, r0.y, r0.w, c17.w
    mul r0.x, r0.x, r3.w
    mul r1.y, r0.y, r0.x
    max r0.xy, r1, t2.z
    min r1.xy, t2.w, r0
    mov r2.xyz, c14
    mad_pp r0.xyw, r1.x, r2.xyzz, c22.xyzz
    mad_pp r0.xyw, r1.y, c17.xyzz, r0
    dp3 r1.x, -c18, t3
    mul r1.y, r1.x, c9.z
    max r2.x, r1.x, r1.y
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyw, r2.x, c19.xyzz, r0
    mad_pp r0.xyw, r2.y, c21.xyzz, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyw, r1.y, c4.xyzz, r0
    add_pp r2.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r2.w
    mul_pp r0.xyw, r0, r3.xyzz
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r2.w, t3, r4
    mov r4, c10
    mad_pp r4, r2.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r2.w, r1.z, r4.w
    dp3 r3.w, r3, t3
    mul r1.yzw, r3.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r2.w, r1
    mad_pp r0.xyw, r4.xyzz, r0, r1.yzzw
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c6.y, r3
    mul_pp r0.xyw, r0, r4.xyzz
    mul_pp r0.xyw, r0, c1.w
    add r1.xyz, r0.xyww, r0.xyww
    mad r0.xyz, r0.xyww, -r0.z, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c6.x, r3
    mul_pp r0.xyz, r0, r4
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 83 instruction slots used (5 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    mad_pp r0.xyz, r4, r0, r1.yzww
    mul_pp r2.w, r4.w, c0.w
    texld_pp r3, t2, s1
    lrp_pp r4.xyz, r1.x, c6.y, r3
    mad_pp r0.xyz, r4, c6.z, r0
    add_pp r0.xyz, r0, c6.w
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r2.xyz, r0, r1
    mov_pp oC0, r2

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t2, s1
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    lrp_pp r3.xyz, r1.x, c6.y, r2
    texld_pp r2, t1, s7
    texld_pp r4, t1, s0
    mul_pp r1.xyw, r3.xyzz, r4.xyzz
    mul_pp r3.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r1.xyww
    add_pp r0.xyz, r0, r0
    log r4.x, r2.x
    log r4.y, r2.y
    log r4.z, r2.z
    mul r1.xyw, r4.xyzz, c5.z
    exp r2.x, r1.x
    exp r2.y, r1.y
    exp r2.z, r1.w
    mul_sat_pp r1.xyw, r2.xyzz, c5.w
    add r2.xyz, -t0, c8
    nrm r4.xyz, r2
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r1.xyw, r1, r4.xyzz
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r2, t3
    mul r4.xyz, r2.w, t3
    mad_pp r2.xyz, r4, c8.w, -r2
    texld_pp r2, r2, s3
    mul_pp r1.xyz, r1.xyww, r2
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    lrp_pp r2.xyz, r1.x, c6.x, r4
    texld_pp r3, t1, s0
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r3.w, c0.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 83 instruction slots used (5 texture, 78 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecMap
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, false, true, false);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0.5, 2, -1
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov_pp r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    dp3 r0.z, r1, -c13
    mov r0.w, c13.w
    mad_sat r0.z, r0.z, r0.w, c14.w
    mul r0.x, r0.y, r0.x
    mul r0.x, r0.z, r0.x
    mov r2.w, c15.w
    add r2.xyz, -t0, c15
    dp4 r2.w, r2, r2
    nrm r1.xyz, r2
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r0.z, t3, r1
    dp3 r0.w, r1, -c16
    mov r2.w, c16.w
    mad_sat r0.w, r0.w, r2.w, c17.w
    mul r0.z, r0.z, r1.w
    mul r0.y, r0.w, r0.z
    max r1.xy, r0, t2.z
    min r0.xy, t2.w, r1
    mov r1.xyz, c14
    mad_pp r0.xzw, r0.x, r1.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    dp3 r0.w, -c18, t3
    mul r1.x, r0.w, c9.z
    max r2.x, r0.w, r1.x
    dp3 r2.y, -c20, t3
    max r1.xy, r2, t2.z
    min r2.xy, t2.w, r1
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mov r1.xy, t1.zwzw
    texld_pp r2, t1, s7
    texld_pp r1, r1, s2
    mad_pp r0.xyz, r1.y, c4, r0
    add_pp r0.w, -r1.w, c6.x
    mad_pp r3.xyz, r1.w, c0, r0.w
    mul_pp r0.xyz, r0, r3
    log r3.x, r2.x
    log r3.y, r2.y
    log r3.z, r2.z
    mul r2.xyz, r3, c5.z
    exp r3.x, r2.x
    exp r3.y, r2.y
    exp r3.z, r2.z
    mul_sat_pp r2.xyz, r3, c5.w
    add r3.xyz, -t0, c8
    nrm r4.xyz, r3
    dp3 r0.w, t3, r4
    mov r4, c10
    mad_pp r4, r0.w, r4, c11
    mul_pp r2.xyz, r2, r4
    mul_pp r0.w, r1.z, r4.w
    dp3 r2.w, r3, t3
    mul r1.yzw, r2.w, t3.xxyz
    mad_pp r3.xyz, r1.yzww, c8.w, -r3
    texld_pp r4, t2, s1
    texld_pp r3, r3, s3
    mul_pp r1.yzw, r2.xxyz, r3.xxyz
    mul_pp r1.yzw, r0.w, r1
    lrp_pp r2.xyz, r1.x, c6.y, r4
    texld_pp r3, t1, s0
    mad_pp r2.xyz, r2, c6.z, r3
    mul_pp r3.w, r3.w, c0.w
    add_pp r2.xyz, r2, c6.w
    mad_pp r0.xyz, r2, r0, r1.yzww
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 84 instruction slots used (5 texture, 79 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.w
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.x
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.w
    mad_pp r0.xyz, r2, c3.x, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.x, r3, c2.w
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.x, r3, c2.x
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c2.z
    mad_pp r3.xyz, r6.x, r3, c2.w
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r3, c3.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 124 instruction slots used (5 texture, 119 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.x, c2.z, r2
    mul_pp r0.xyz, r0, r3
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.x, c2.x, r2
    mul_pp r1.xyz, r0, r3
    mov_pp oC0, r1

// approximately 122 instruction slots used (5 texture, 117 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.x, c2.z, r2
    mad_pp r0.xyz, r3, c2.w, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c2.z, r3
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplySpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c2.x, r3
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 122 instruction slots used (5 texture, 117 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c2.z, r3
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r7, c2.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r3.xyz, r1, r0.w, r0
    mov_pp oC0, r3

// approximately 123 instruction slots used (5 texture, 118 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.x, r2, c6.w
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mov r3.xyz, c1
    mad r0.xyz, r0, -c23.x, r3
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 131 instruction slots used (5 texture, 126 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.x, r2, c6.x
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    add r2.xyz, r2, c6.z
    mad_pp r2.xyz, r6.x, r2, c6.w
    mad_pp r0.xyz, r2, c23.x, r0
    add_pp r0.xyz, r0, -c6.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.x, r3, c6.w
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.x, r3, c6.x
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r3
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, -0.5, 0.5
    def c23, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    add r3.xyz, r3, c6.z
    mad_pp r3.xyz, r6.x, r3, c6.w
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r3, c23.x, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 130 instruction slots used (5 texture, 125 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c6
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    mul r1.w, r0.x, r1.w
    dp3 r0.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r0.x, c13.w, r3.w
    mul r0.x, r1.w, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r1.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r1.w, -c15.w, r2.x
    dp3_sat r3.w, t3, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r0.y, r1.w, r3.w
    max r2.xy, r0, t2.z
    min r0.xy, t2.w, r2
    dp3 r1.w, -r5, t3
    add r1.w, r1.w, r1.w
    mad r2.xyz, t3, -r1.w, -r5
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r2, r5
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r2.xyz, r1.w, c17
    mul r2.xyz, r0.y, r2
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r3.w, r1, r5
    max r4.w, r3.w, c6.y
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r0.x, r2
    dp3 r1.w, -c18, t3
    mul r3.w, r1.w, c9.z
    max r2.x, r1.w, r3.w
    dp3 r2.y, -c20, t3
    max r0.zw, r2.xyxy, t2.z
    min r2.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r2.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r3.w, t3, r5
    mov r5, c10
    mad_pp r5, r3.w, r5, c11
    max r3.w, r1.w, c6.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r2.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r3.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r4, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r4
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r3, t2, s1
    lrp_pp r2.xyz, r6.x, c6.z, r3
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.x, c6.x, r2
    mul_pp r0.xyz, r0, r3
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 128 instruction slots used (5 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t1, s0
    texld_pp r2, r2, s3
    mad_pp r0.xyz, r3, r0, r1
    mul_pp r1.w, r3.w, c0.w
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    texld_pp r2, t2, s1
    lrp_pp r3.xyz, r6.x, c6.z, r2
    mad_pp r0.xyz, r3, c6.w, r0
    add_pp r0.xyz, r0, -c6.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c6.z, r3
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mul_pp r0.xyz, r0, r2
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r6.z, r0
    mul_pp r0.w, r5.w, r6.z
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c6.x, r3
    mul_pp r0.w, r5.w, r6.z
    mul_pp r2.xyz, r2, r7
    mul_pp r3.w, r2.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 128 instruction slots used (5 texture, 123 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecMapSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, false, true, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c6, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    dcl_2d s7
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c6.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c6.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c6.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s7
    texld_pp r6, r6, s2
    log r8.x, r7.x
    log r8.y, r7.y
    log r8.z, r7.z
    mul r7.xyz, r8, c5.z
    exp r8.x, r7.x
    exp r8.y, r7.y
    exp r8.z, r7.z
    mul_sat_pp r7.xyz, r8, c5.w
    mul_pp r5.xyz, r5, r7
    mul_sat_pp r1.xyz, r1, r5
    mul_pp r1.xyz, r6.z, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c6.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    texld_pp r2, t1, s0
    texld_pp r3, t2, s1
    lrp_pp r7.xyz, r6.x, c6.z, r3
    mul_pp r0.w, r5.w, r6.z
    mad_pp r2.xyz, r7, c6.w, r2
    mul_pp r3.w, r2.w, c0.w
    add_pp r2.xyz, r2, -c6.x
    mad_pp r0.xyz, r2, r0, r1
    dp3 r4.w, r4, t3
    mul r1.xyz, r4.w, t3
    mad_pp r1.xyz, r1, c8.w, -r4
    texld_pp r1, r1, s3
    mul_pp r1.xyz, r5, r1
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r3.xyz, r0, r1
    mov_pp oC0, r3

// approximately 129 instruction slots used (5 texture, 124 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.w
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.x
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.w
    mad_pp r0.xyz, r2, c3.x, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c1, r0
    add_pp r0.w, -r2.w, c2.x
    mad_pp r6.xyz, r2.w, c0, r0.w
    mul_pp r0.xyz, r0, r6
    add r3.xyz, r3, c2.z
    mad_pp r2.xyw, r2.x, r3.xyzz, c2.w
    dp3 r0.w, r4, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r2, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.x
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, -0.5, 0.5
    def c3, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c2.z
    mad_pp r2.xyz, r6.x, r2, c2.w
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c3.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 114 instruction slots used (4 texture, 110 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c2.z, r3
    mul_pp r0.xyz, r0, r2
    add_pp r1.xyz, r0, r0
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
	
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w	
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
	
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
	
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
	
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18	
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
	
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
	
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
	
    max r2.w, r1.w, c2.y	
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
	
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
	
    mul_pp r1.xyz, r1, r6.z
	
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
	
    mad_pp r0.xyz, r7, r0, r1
	
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c2.x, r3
    mul_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 112 instruction slots used (4 texture, 108 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c2.z, r3
    mad_pp r0.xyz, r2, c2.w, r0
    add_pp r1.xyz, r0, -c2.x
    mov_pp oC0, r1

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c1, r0
    add_pp r0.w, -r2.w, c2.x
    mad_pp r6.xyz, r2.w, c0, r0.w
    mul_pp r0.xyz, r0, r6
    lrp_pp r6.xyz, r2.x, c2.z, r3
    dp3 r0.w, r4, t3
    mul r2.xyw, r0.w, t3.xyzz
    mad_pp r3.xyz, r2.xyww, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r6.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplySpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.x, c2.x, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 112 instruction slots used (4 texture, 108 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, false, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c2, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c2.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c2.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c2.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c1, r0
    add_pp r0.w, -r6.w, c2.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.x, c2.z, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c2.w, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c2.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r4.xyz, r1, r0.w, r0
    mov_pp oC0, r4

// approximately 113 instruction slots used (4 texture, 109 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.x, r2, c5.w
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mov r3.xyz, c1
    mad r0.xyz, r0, -c6.x, r3
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 121 instruction slots used (4 texture, 117 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.x, r2, c5.x
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailBeforeReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    add r2.xyz, r3, c5.z
    mad_pp r2.xyz, r6.x, r2, c5.w
    mad_pp r0.xyz, r2, c6.x, r0
    add_pp r0.xyz, r0, -c5.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c4, r0
    add_pp r0.w, -r2.w, c5.x
    mad_pp r6.xyz, r2.w, c0, r0.w
    mul_pp r0.xyz, r0, r6
    add r3.xyz, r3, c5.z
    mad_pp r2.xyw, r2.x, r3.xyzz, c5.w
    dp3 r0.w, r4, t3
    mul r3.xyz, r0.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r2, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -1, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c5.z
    mad_pp r2.xyz, r6.x, r2, c5.x
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskDetailAfterReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, false, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, -0.5, 0.5
    def c6, 2, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    add r2.xyz, r7, c5.z
    mad_pp r2.xyz, r6.x, r2, c5.w
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c6.x, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c5.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 120 instruction slots used (4 texture, 116 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r2.xw, c5
    mad r1.w, r0.w, -c12.w, r2.x
    dp3_sat r0.x, t3, r1
    mul r1.w, r0.x, r1.w
    dp3 r0.x, r1, -c13
    mov r3, c14
    mad_sat r3.w, r0.x, c13.w, r3.w
    mul r0.x, r1.w, r3.w
    mov r4.w, c15.w
    add r4.xyz, -t0, c15
    dp4 r1.w, r4, r4
    nrm r5.xyz, r4
    mad r1.w, r1.w, -c15.w, r2.x
    dp3_sat r3.w, t3, r5
    mul r1.w, r1.w, r3.w
    dp3 r3.w, r5, -c16
    mov r5.w, c17.w
    mad_sat r3.w, r3.w, c16.w, r5.w
    mul r0.y, r1.w, r3.w
    max r2.xy, r0, t2.z
    min r0.xy, t2.w, r2
    dp3 r1.w, -r5, t3
    add r1.w, r1.w, r1.w
    mad r2.xyz, t3, -r1.w, -r5
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r2, r5
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r2.xyz, r1.w, c17
    mul r2.xyz, r0.y, r2
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r3.w, r1, r5
    max r4.w, r3.w, c5.y
    pow r3.w, r4.w, c7.z
    mul r3.w, r3.w, c7.w
    mul r1.xyz, r3.w, c14
    mad_pp r1.xyz, r1, r0.x, r2
    dp3 r1.w, -c18, t3
    mul r3.w, r1.w, c9.z
    max r2.x, r1.w, r3.w
    dp3 r2.y, -c20, t3
    max r0.zw, r2.xyxy, t2.z
    min r2.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r2.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r3.w, t3, r5
    mov r5, c10
    mad_pp r5, r3.w, r5, c11
    max r3.w, r1.w, c5.y
    pow r1.w, r3.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r2.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r3.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r2.x, c19, r0
    mad_pp r0.xyz, r2.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r4, r2, s3
    mul_pp r2.xyz, r5, r4
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c5.z, r3
    mul_pp r0.xyz, r0, r2
    mul_pp r0.xyz, r0, c1.w
    add r2.xyz, r0, r0
    mad r0.xyz, r0, -r2.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c5.x, r3
    mul_pp r0.xyz, r0, r2
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 118 instruction slots used (4 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailBeforeReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, true, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t1, s0
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    mad_pp r0.xyz, r7, r0, r1
    mul_pp r1.w, r7.w, c0.w
    dp3 r0.w, r4, t3
    mul r2.xyz, r0.w, t3
    mad_pp r2.xyz, r2, c8.w, -r4
    texld_pp r3, t2, s1
    texld_pp r2, r2, s3
    mul_pp r2.xyz, r5, r2
    mul_pp r0.w, r5.w, r6.z
    mad_pp r0.xyz, r2, r0.w, r0
    lrp_pp r2.xyz, r6.x, c5.z, r3
    mad_pp r0.xyz, r2, c5.w, r0
    add_pp r0.xyz, r0, -c5.x
    mul r2.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r2
    mov r2.xyz, c2
    mad_sat_pp r2.xyz, t2.z, -r2, c3
    add_pp r1.xyz, r0, r2
    mov_pp oC0, r1

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_multiply, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mov r2.xy, t1.zwzw
    texld_pp r3, t2, s1
    texld_pp r2, r2, s2
    mad_pp r0.xyz, r2.y, c4, r0
    add_pp r0.w, -r2.w, c5.x
    mad_pp r6.xyz, r2.w, c0, r0.w
    mul_pp r0.xyz, r0, r6
    lrp_pp r6.xyz, r2.x, c5.z, r3
    dp3 r0.w, r4, t3
    mul r2.xyw, r0.w, t3.xyzz
    mad_pp r3.xyz, r2.xyww, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyw, r6.xyzz, r4.xyzz
    mul_pp r4.w, r4.w, c0.w
    mul_pp r0.xyz, r0, r2.xyww
    add_pp r0.xyz, r0, r0
    mad_pp r0.xyz, r1, r2.z, r0
    mul_pp r0.w, r5.w, r2.z
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionMultiplyComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_multiply, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0, 0
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.x, c5.x, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mul_pp r2.xyz, r2, r4
    mul_pp r4.w, r4.w, c0.w
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 118 instruction slots used (4 texture, 114 arithmetic)
		};
#endif
	}
}

Technique MultipurposeMaskInverseDetailAfterReflectionBiasedAddComplexFogSpecLighting
{
	Pass P0
	{
#ifndef USE_ASM
		PixelShader = compile TGT ModelMaskMultipurpose(detail_function_biased_add, false, true, true, false, false, false, true);
#else
		PixelShader = asm
		{
    ps_2_x
    def c5, 1, 0, 0.5, 2
    dcl t0.xyz
    dcl t1
    dcl t2
    dcl t3.xyz
    dcl_2d s0
    dcl_2d s1
    dcl_2d s2
    dcl_cube s3
    mov r0.w, c12.w
    add r0.xyz, -t0, c12
    dp4 r0.w, r0, r0
    nrm r1.xyz, r0
    mov r1.w, c5.x
    mad r0.x, r0.w, -c12.w, r1.w
    dp3_sat r0.y, t3, r1
    mul r0.x, r0.y, r0.x
    dp3 r0.y, r1, -c13
    mov r2, c14
    mad_sat r2.w, r0.y, c13.w, r2.w
    mul r0.x, r0.x, r2.w
    mov r3.w, c15.w
    add r3.xyz, -t0, c15
    dp4 r2.w, r3, r3
    nrm r4.xyz, r3
    mad r1.w, r2.w, -c15.w, r1.w
    dp3_sat r2.w, t3, r4
    mul r1.w, r1.w, r2.w
    dp3 r2.w, r4, -c16
    mov r4.w, c17.w
    mad_sat r2.w, r2.w, c16.w, r4.w
    mul r0.y, r1.w, r2.w
    max r3.xy, r0, t2.z
    min r0.xy, t2.w, r3
    dp3 r1.w, -r4, t3
    add r1.w, r1.w, r1.w
    mad r3.xyz, t3, -r1.w, -r4
    add r4.xyz, -t0, c8
    nrm r5.xyz, r4
    dp3 r1.w, r3, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r3.xyz, r1.w, c17
    mul r3.xyz, r0.y, r3
    dp3 r1.w, -r1, t3
    add r1.w, r1.w, r1.w
    mad r1.xyz, t3, -r1.w, -r1
    dp3 r2.w, r1, r5
    max r3.w, r2.w, c5.y
    pow r2.w, r3.w, c7.z
    mul r2.w, r2.w, c7.w
    mul r1.xyz, r2.w, c14
    mad_pp r1.xyz, r1, r0.x, r3
    dp3 r1.w, -c18, t3
    mul r2.w, r1.w, c9.z
    max r3.x, r1.w, r2.w
    dp3 r3.y, -c20, t3
    max r0.zw, r3.xyxy, t2.z
    min r3.xy, t2.w, r0.zwzw
    dp3 r1.w, c18, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c18
    dp3 r1.w, r6, r5
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c19
    mad_pp r1.xyz, r6, r3.x, r1
    dp3 r1.w, c20, t3
    add r1.w, r1.w, r1.w
    mad r6.xyz, t3, -r1.w, c20
    dp3 r1.w, r6, r5
    dp3 r2.w, t3, r5
    mov r5, c10
    mad_pp r5, r2.w, r5, c11
    max r2.w, r1.w, c5.y
    pow r1.w, r2.w, c7.z
    mul r1.w, r1.w, c7.w
    mul r6.xyz, r1.w, c21
    mad_pp r1.xyz, r6, r3.y, r1
    mul_sat_pp r1.xyz, r5, r1
    mov r6.xy, t1.zwzw
    texld_pp r7, t2, s1
    texld_pp r6, r6, s2
    mul_pp r1.xyz, r1, r6.z
    mad_pp r0.xzw, r0.x, r2.xyyz, c22.xyyz
    mad_pp r0.xyz, r0.y, c17, r0.xzww
    mad_pp r0.xyz, r3.x, c19, r0
    mad_pp r0.xyz, r3.y, c21, r0
    mad_pp r0.xyz, r6.y, c4, r0
    add_pp r0.w, -r6.w, c5.x
    mad_pp r2.xyz, r6.w, c0, r0.w
    mul_pp r0.xyz, r0, r2
    lrp_pp r2.xyz, r6.x, c5.z, r7
    mul_pp r0.w, r5.w, r6.z
    dp3 r1.w, r4, t3
    mul r3.xyz, r1.w, t3
    mad_pp r3.xyz, r3, c8.w, -r4
    texld_pp r4, t1, s0
    texld_pp r3, r3, s3
    mad_pp r2.xyz, r2, c5.w, r4
    mul_pp r4.w, r4.w, c0.w
    add_pp r2.xyz, r2, -c5.x
    mad_pp r0.xyz, r2, r0, r1
    mul_pp r1.xyz, r5, r3
    mad_pp r0.xyz, r1, r0.w, r0
    mul r1.xyz, r0, c1.w
    mad r0.xyz, r0, -c1.w, c1
    mad r0.xyz, t2.z, r0, r1
    mov r1.xyz, c2
    mad_sat_pp r1.xyz, t2.z, -r1, c3
    add_pp r4.xyz, r0, r1
    mov_pp oC0, r4

// approximately 119 instruction slots used (4 texture, 115 arithmetic)
		};
#endif
	}
}